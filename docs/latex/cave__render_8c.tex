\hypertarget{cave__render_8c}{}\doxysection{deps/stb/tests/caveview/cave\+\_\+render.c File Reference}
\label{cave__render_8c}\index{deps/stb/tests/caveview/cave\_render.c@{deps/stb/tests/caveview/cave\_render.c}}
{\ttfamily \#include \char`\"{}stb\+\_\+voxel\+\_\+render.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stb\+\_\+gl.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stb\+\_\+image.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stb\+\_\+glprog.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}caveview.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}cave\+\_\+parse.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stb.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sdl.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sdl\+\_\+thread.\+h\char`\"{}}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structchunk__mesh}{chunk\+\_\+mesh}}
\item 
struct \mbox{\hyperlink{structmesh__worker}{mesh\+\_\+worker}}
\item 
struct \mbox{\hyperlink{structplane}{plane}}
\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{cave__render_8c_aae20e9fa62595e4621ebf19a38824f9f}{S\+T\+B\+\_\+\+G\+L\+E\+X\+T\+\_\+\+D\+E\+C\+L\+A\+RE}}~\char`\"{}glext\+\_\+list.\+h\char`\"{}
\item 
\#define \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{T\+E\+X\+\_\+\+S\+I\+ZE}}~64
\item 
\#define \mbox{\hyperlink{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}{C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+X}}~128
\item 
\#define \mbox{\hyperlink{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}{C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+Y}}~128
\item 
\#define \mbox{\hyperlink{cave__render_8c_ab54d50961c308cab099df191eae355dc}{M\+A\+X\+\_\+\+M\+E\+S\+H\+\_\+\+W\+O\+R\+K\+E\+RS}}~8
\item 
\#define \mbox{\hyperlink{cave__render_8c_a7b07c8b39eb09303b3bc526d23852a49}{M\+A\+X\+\_\+\+C\+H\+U\+N\+K\+\_\+\+L\+O\+A\+D\+\_\+\+W\+O\+R\+K\+E\+RS}}~2
\item 
\#define \mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{M\+A\+X\+\_\+\+Q\+U\+E\+UE}}~8
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \{ \newline
\mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}{S\+T\+A\+T\+E\+\_\+invalid}}, 
\mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba30055d9bf9753d6c86c158dd8273ad42}{S\+T\+A\+T\+E\+\_\+needed}}, 
\mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba12236ecbf4b9525bd229902691ec52a8}{S\+T\+A\+T\+E\+\_\+requested}}, 
\mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649badb51c470c1e4690044182d0d2acfd76b}{S\+T\+A\+T\+E\+\_\+abandoned}}, 
\newline
\mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}{S\+T\+A\+T\+E\+\_\+valid}}
 \}
\item 
enum \{ \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}{W\+S\+T\+A\+T\+E\+\_\+idle}}, 
\mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531ae47531269e4c42627dba00cefad5e6bd}{W\+S\+T\+A\+T\+E\+\_\+requested}}, 
\mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af060baead9e16d712b41715e70cf1817}{W\+S\+T\+A\+T\+E\+\_\+running}}, 
\mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af1b58a01d0b884947fc6b97377100744}{W\+S\+T\+A\+T\+E\+\_\+mesh\+\_\+ready}}
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_afaed9dd655d3234c979e5cc06387c4c9}{scale\+\_\+texture}} (unsigned char $\ast$\mbox{\hyperlink{glad_8h_a72e0fdf0f845ded60b1fada9e9195cd7}{src}}, int \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}, int \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}, int \mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}}, int \mbox{\hyperlink{glad_8h_afa0fb1b5e976920c0abeff2dca3ed774}{h}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a3291895cb2521f7295027d4694bbf242}{build\+\_\+base\+\_\+texture}} (int \mbox{\hyperlink{glad_8h_ae2b4646468bc89d0ba646f5cf838e051}{n}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a66b14614ec4f304af8c774ed9fa2ae43}{build\+\_\+overlay\+\_\+texture}} (int \mbox{\hyperlink{glad_8h_ae2b4646468bc89d0ba646f5cf838e051}{n}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a8da956987731d72d3d6af47e0c31ace3}{free\+\_\+chunk}} (int slot\+\_\+x, int slot\+\_\+y)
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a04153b43860d9d0dacbc819ffefef9b6}{upload\+\_\+mesh}} (\mbox{\hyperlink{structchunk__mesh}{chunk\+\_\+mesh}} $\ast$cm, \mbox{\hyperlink{stb_8h_adde6aaee8457bee49c2a92621fe22b79}{uint8}} $\ast$\mbox{\hyperlink{cave__mesher_8c_a165e793676d312d0c37aa23551127f48}{build\+\_\+buffer}}, \mbox{\hyperlink{stb_8h_adde6aaee8457bee49c2a92621fe22b79}{uint8}} $\ast$\mbox{\hyperlink{cave__mesher_8c_aa27715cf788c95d0334051f4bfe7ade9}{face\+\_\+buffer}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a58563743e658ed82deb1c45915be5311}{setup\+\_\+uniforms}} (float pos\mbox{[}3\mbox{]})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a5a929f915201b0dbb791c74db8420500}{make\+\_\+texture\+\_\+buffer\+\_\+for\+\_\+uniform}} (int uniform, int slot)
\item 
int \mbox{\hyperlink{cave__render_8c_a18386edf73cd3e3f424ea7cb0f5dab1e}{request\+\_\+chunk}} (int chunk\+\_\+x, int chunk\+\_\+y)
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a654d2857d277992878a8c7ff1f740282}{update\+\_\+meshes\+\_\+from\+\_\+render\+\_\+thread}} (\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a5a5da02ffa962221a8ddf7318d07a30b}{init\+\_\+tex2\+\_\+gradient}} (\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a780d126fbb25c976ce349b06059ecc66}{set\+\_\+tex2\+\_\+alpha}} (float fa)
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a19d602180d3af1e1e3969518075548cc}{render\+\_\+init}} (\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a5a106573dea6ac6f71be5e80fb56eefc}{world\+\_\+init}} (\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}})
\item 
int \mbox{\hyperlink{cave__render_8c_a0f9a7e36ad9614200f0404d37b26b9e6}{mesh\+\_\+worker\+\_\+handler}} (\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} $\ast$\mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a3a88de78ef4cee2f85236e996e8682d6}{prepare\+\_\+threads}} (\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}})
\item 
float \mbox{\hyperlink{cave__render_8c_a7fd43582038fa12183f22d2b5bc70793}{compute\+\_\+priority}} (int cx, int cy, float \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}, float \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{cave__render_8c_a89dc2c85caece8e70d773437fdc2884e}{render\+\_\+caves}} (float campos\mbox{[}3\mbox{]})
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structstbvox__mesh__maker}{stbvox\+\_\+mesh\+\_\+maker}} \mbox{\hyperlink{cave__render_8c_abee69a8c0dbc3a083193dea4dddbaf8c}{g\+\_\+mesh\+\_\+maker}}
\item 
\mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} \mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\+\_\+prog}}
\item 
\mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{G\+Lint}} \mbox{\hyperlink{cave__render_8c_a0a49f812024b3918eb53c67d24855f71}{uniform\+\_\+locations}} \mbox{[}64\mbox{]}
\item 
\mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}} \mbox{\hyperlink{cave__render_8c_a7bd3b5acd72e44b1cfcd5e9c47744df1}{texture}} \mbox{[}\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{T\+E\+X\+\_\+\+S\+I\+ZE}}\mbox{]}\mbox{[}\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{T\+E\+X\+\_\+\+S\+I\+ZE}}\mbox{]}
\item 
\mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\+\_\+tex}} \mbox{[}2\mbox{]}
\item 
\mbox{\hyperlink{structchunk__mesh}{chunk\+\_\+mesh}} \mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\+\_\+chunk\+\_\+mesh}} \mbox{[}\mbox{\hyperlink{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}{C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+Y}}\mbox{]}\mbox{[}\mbox{\hyperlink{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}{C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+X}}\mbox{]}
\item 
\mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{G\+Lint}} \mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\+\_\+loc}} \mbox{[}16\mbox{]}
\item 
float \mbox{\hyperlink{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}{table3}} \mbox{[}128\mbox{]}\mbox{[}3\mbox{]}
\item 
float \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}} \mbox{[}64\mbox{]}\mbox{[}4\mbox{]}
\item 
\mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{G\+Lint}} \mbox{\hyperlink{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}{tablei}} \mbox{[}2\mbox{]}
\item 
float \mbox{\hyperlink{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}{step}} =0
\item 
int \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\+\_\+dist\+\_\+in\+\_\+chunks}} = 80
\item 
\mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} \mbox{\hyperlink{cave__render_8c_a3c60dcdbe2df0b0c0a07efca95d43dc6}{unitex}} \mbox{[}64\mbox{]}
\item 
\mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} \mbox{\hyperlink{cave__render_8c_a6460fe1f8f03a28c10270f7feb90ec5a}{unibuf}} \mbox{[}64\mbox{]}
\item 
int \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\+\_\+mesh\+\_\+workers}}
\item 
int \mbox{\hyperlink{cave__render_8c_af8de331bce440ec054d598cba1453d65}{num\+\_\+chunk\+\_\+load\+\_\+workers}}
\item 
\mbox{\hyperlink{structmesh__worker}{mesh\+\_\+worker}} \mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\+\_\+data}} \mbox{[}\mbox{\hyperlink{cave__render_8c_ab54d50961c308cab099df191eae355dc}{M\+A\+X\+\_\+\+M\+E\+S\+H\+\_\+\+W\+O\+R\+K\+E\+RS}}\mbox{]}
\item 
int \mbox{\hyperlink{cave__render_8c_a71cf846b08a6962abf1c34ab13da6933}{num\+\_\+meshes\+\_\+started}}
\item 
unsigned char \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\+\_\+data}} \mbox{[}64\mbox{]}\mbox{[}4\mbox{]}
\item 
S\+D\+L\+\_\+mutex $\ast$ \mbox{\hyperlink{cave__render_8c_a784ba0617dbc4eec455188b9671295aa}{chunk\+\_\+cache\+\_\+mutex}}
\item 
int \mbox{\hyperlink{cave__render_8c_a1a7fcf5f88dd3987df4f5a83618c8487}{chunk\+\_\+locations}}
\item 
int \mbox{\hyperlink{cave__render_8c_a90766e990c4a0a3299dae681bef26211}{chunks\+\_\+considered}}
\item 
int \mbox{\hyperlink{cave__render_8c_aabc2460c0dbf3bb17bf2c768624a37a2}{chunks\+\_\+in\+\_\+frustum}}
\item 
int \mbox{\hyperlink{cave__render_8c_a7eb76aa1c7fbf02b3f4cf94c13ba7836}{quads\+\_\+considered}}
\item 
int \mbox{\hyperlink{cave__render_8c_a55f891b23463a28bdca885af7b70b4db}{quads\+\_\+rendered}}
\item 
int \mbox{\hyperlink{cave__render_8c_a2a36f03ff6514a6581bbfdb8c6912a5e}{chunk\+\_\+storage\+\_\+rendered}}
\item 
int \mbox{\hyperlink{cave__render_8c_aac1c4d107c5e708ee713ec9a6ccddc84}{chunk\+\_\+storage\+\_\+considered}}
\item 
int \mbox{\hyperlink{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}{chunk\+\_\+storage\+\_\+total}}
\item 
int \mbox{\hyperlink{cave__render_8c_a04a50dab765fa9f8b75814989b798eb4}{update\+\_\+frustum}} = 1
\item 
int \mbox{\hyperlink{cave__render_8c_aaad3ccb28ec5b3ab89cdb42cd3c21771}{max\+\_\+chunk\+\_\+storage}} = 900 $<$$<$ 20
\item 
int \mbox{\hyperlink{cave__render_8c_a8a1468c6c20eb6549bdb72976fbd13fe}{min\+\_\+chunk\+\_\+storage}} = 800 $<$$<$ 20
\item 
float \mbox{\hyperlink{cave__render_8c_a538e3a4857cf9635776e05cf1ada9a83}{min\+\_\+priority}} = -\/500
\item 
int \mbox{\hyperlink{cave__render_8c_a0ced74c1235cfa302b0fda9cba9682e4}{num\+\_\+meshes\+\_\+uploaded}}
\item 
float \mbox{\hyperlink{cave__render_8c_aae02e1ae69339213673af37e15e343b4}{tex2\+\_\+alpha}}
\item 
int \mbox{\hyperlink{cave__render_8c_ab714d9bf6480e3842f9174937f6257c9}{global\+\_\+hack}}
\item 
int \mbox{\hyperlink{cave__render_8c_a080346cc58cb8f8b780aa706f20a1bdc}{num\+\_\+threads\+\_\+active}}
\item 
float \mbox{\hyperlink{cave__render_8c_a9605ff44e577ffadbd55c8a55fc4ea5a}{chunk\+\_\+server\+\_\+activity}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}\label{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}} 
\index{cave\_render.c@{cave\_render.c}!CACHED\_MESH\_NUM\_X@{CACHED\_MESH\_NUM\_X}}
\index{CACHED\_MESH\_NUM\_X@{CACHED\_MESH\_NUM\_X}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{CACHED\_MESH\_NUM\_X}{CACHED\_MESH\_NUM\_X}}
{\footnotesize\ttfamily \#define C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+X~128}



Definition at line 122 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}\label{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}} 
\index{cave\_render.c@{cave\_render.c}!CACHED\_MESH\_NUM\_Y@{CACHED\_MESH\_NUM\_Y}}
\index{CACHED\_MESH\_NUM\_Y@{CACHED\_MESH\_NUM\_Y}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{CACHED\_MESH\_NUM\_Y}{CACHED\_MESH\_NUM\_Y}}
{\footnotesize\ttfamily \#define C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+Y~128}



Definition at line 123 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a7b07c8b39eb09303b3bc526d23852a49}\label{cave__render_8c_a7b07c8b39eb09303b3bc526d23852a49}} 
\index{cave\_render.c@{cave\_render.c}!MAX\_CHUNK\_LOAD\_WORKERS@{MAX\_CHUNK\_LOAD\_WORKERS}}
\index{MAX\_CHUNK\_LOAD\_WORKERS@{MAX\_CHUNK\_LOAD\_WORKERS}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{MAX\_CHUNK\_LOAD\_WORKERS}{MAX\_CHUNK\_LOAD\_WORKERS}}
{\footnotesize\ttfamily \#define M\+A\+X\+\_\+\+C\+H\+U\+N\+K\+\_\+\+L\+O\+A\+D\+\_\+\+W\+O\+R\+K\+E\+RS~2}



Definition at line 325 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_ab54d50961c308cab099df191eae355dc}\label{cave__render_8c_ab54d50961c308cab099df191eae355dc}} 
\index{cave\_render.c@{cave\_render.c}!MAX\_MESH\_WORKERS@{MAX\_MESH\_WORKERS}}
\index{MAX\_MESH\_WORKERS@{MAX\_MESH\_WORKERS}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{MAX\_MESH\_WORKERS}{MAX\_MESH\_WORKERS}}
{\footnotesize\ttfamily \#define M\+A\+X\+\_\+\+M\+E\+S\+H\+\_\+\+W\+O\+R\+K\+E\+RS~8}



Definition at line 324 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_ab94814559b67e4a2a564087f821145ea}\label{cave__render_8c_ab94814559b67e4a2a564087f821145ea}} 
\index{cave\_render.c@{cave\_render.c}!MAX\_QUEUE@{MAX\_QUEUE}}
\index{MAX\_QUEUE@{MAX\_QUEUE}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{MAX\_QUEUE}{MAX\_QUEUE}}
{\footnotesize\ttfamily \#define M\+A\+X\+\_\+\+Q\+U\+E\+UE~8}

\mbox{\Hypertarget{cave__render_8c_aae20e9fa62595e4621ebf19a38824f9f}\label{cave__render_8c_aae20e9fa62595e4621ebf19a38824f9f}} 
\index{cave\_render.c@{cave\_render.c}!STB\_GLEXT\_DECLARE@{STB\_GLEXT\_DECLARE}}
\index{STB\_GLEXT\_DECLARE@{STB\_GLEXT\_DECLARE}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{STB\_GLEXT\_DECLARE}{STB\_GLEXT\_DECLARE}}
{\footnotesize\ttfamily \#define S\+T\+B\+\_\+\+G\+L\+E\+X\+T\+\_\+\+D\+E\+C\+L\+A\+RE~\char`\"{}glext\+\_\+list.\+h\char`\"{}}



Definition at line 8 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}\label{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}} 
\index{cave\_render.c@{cave\_render.c}!TEX\_SIZE@{TEX\_SIZE}}
\index{TEX\_SIZE@{TEX\_SIZE}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{TEX\_SIZE}{TEX\_SIZE}}
{\footnotesize\ttfamily \#define T\+E\+X\+\_\+\+S\+I\+ZE~64}



Definition at line 37 of file cave\+\_\+render.\+c.



\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{cave__render_8c_ab39a415800ebd0d977c477376649649b}\label{cave__render_8c_ab39a415800ebd0d977c477376649649b}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{STATE\_invalid@{STATE\_invalid}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!STATE\_invalid@{STATE\_invalid}}}\mbox{\Hypertarget{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}\label{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}} 
S\+T\+A\+T\+E\+\_\+invalid&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{STATE\_needed@{STATE\_needed}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!STATE\_needed@{STATE\_needed}}}\mbox{\Hypertarget{cave__render_8c_ab39a415800ebd0d977c477376649649ba30055d9bf9753d6c86c158dd8273ad42}\label{cave__render_8c_ab39a415800ebd0d977c477376649649ba30055d9bf9753d6c86c158dd8273ad42}} 
S\+T\+A\+T\+E\+\_\+needed&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{STATE\_requested@{STATE\_requested}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!STATE\_requested@{STATE\_requested}}}\mbox{\Hypertarget{cave__render_8c_ab39a415800ebd0d977c477376649649ba12236ecbf4b9525bd229902691ec52a8}\label{cave__render_8c_ab39a415800ebd0d977c477376649649ba12236ecbf4b9525bd229902691ec52a8}} 
S\+T\+A\+T\+E\+\_\+requested&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{STATE\_abandoned@{STATE\_abandoned}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!STATE\_abandoned@{STATE\_abandoned}}}\mbox{\Hypertarget{cave__render_8c_ab39a415800ebd0d977c477376649649badb51c470c1e4690044182d0d2acfd76b}\label{cave__render_8c_ab39a415800ebd0d977c477376649649badb51c470c1e4690044182d0d2acfd76b}} 
S\+T\+A\+T\+E\+\_\+abandoned&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{STATE\_valid@{STATE\_valid}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!STATE\_valid@{STATE\_valid}}}\mbox{\Hypertarget{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}\label{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}} 
S\+T\+A\+T\+E\+\_\+valid&\\
\hline

\end{DoxyEnumFields}


Definition at line 43 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{44 \{}
\DoxyCodeLine{45    \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}{STATE\_invalid}},}
\DoxyCodeLine{46    \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba30055d9bf9753d6c86c158dd8273ad42}{STATE\_needed}},}
\DoxyCodeLine{47    \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba12236ecbf4b9525bd229902691ec52a8}{STATE\_requested}},}
\DoxyCodeLine{48    \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649badb51c470c1e4690044182d0d2acfd76b}{STATE\_abandoned}},}
\DoxyCodeLine{49    \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}{STATE\_valid}},}
\DoxyCodeLine{50 \};}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_ae33c78feb670de33d2abf21ec0624531}\label{cave__render_8c_ae33c78feb670de33d2abf21ec0624531}} 
\doxysubsubsection{\texorpdfstring{anonymous enum}{anonymous enum}}
{\footnotesize\ttfamily anonymous enum}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{WSTATE\_idle@{WSTATE\_idle}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!WSTATE\_idle@{WSTATE\_idle}}}\mbox{\Hypertarget{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}\label{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}} 
W\+S\+T\+A\+T\+E\+\_\+idle&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WSTATE\_requested@{WSTATE\_requested}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!WSTATE\_requested@{WSTATE\_requested}}}\mbox{\Hypertarget{cave__render_8c_ae33c78feb670de33d2abf21ec0624531ae47531269e4c42627dba00cefad5e6bd}\label{cave__render_8c_ae33c78feb670de33d2abf21ec0624531ae47531269e4c42627dba00cefad5e6bd}} 
W\+S\+T\+A\+T\+E\+\_\+requested&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WSTATE\_running@{WSTATE\_running}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!WSTATE\_running@{WSTATE\_running}}}\mbox{\Hypertarget{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af060baead9e16d712b41715e70cf1817}\label{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af060baead9e16d712b41715e70cf1817}} 
W\+S\+T\+A\+T\+E\+\_\+running&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{WSTATE\_mesh\_ready@{WSTATE\_mesh\_ready}!cave\_render.c@{cave\_render.c}}\index{cave\_render.c@{cave\_render.c}!WSTATE\_mesh\_ready@{WSTATE\_mesh\_ready}}}\mbox{\Hypertarget{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af1b58a01d0b884947fc6b97377100744}\label{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af1b58a01d0b884947fc6b97377100744}} 
W\+S\+T\+A\+T\+E\+\_\+mesh\+\_\+ready&\\
\hline

\end{DoxyEnumFields}


Definition at line 353 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{354 \{}
\DoxyCodeLine{355    \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}{WSTATE\_idle}},}
\DoxyCodeLine{356    \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531ae47531269e4c42627dba00cefad5e6bd}{WSTATE\_requested}},}
\DoxyCodeLine{357    \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af060baead9e16d712b41715e70cf1817}{WSTATE\_running}},}
\DoxyCodeLine{358    \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af1b58a01d0b884947fc6b97377100744}{WSTATE\_mesh\_ready}},}
\DoxyCodeLine{359 \};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{cave__render_8c_a3291895cb2521f7295027d4694bbf242}\label{cave__render_8c_a3291895cb2521f7295027d4694bbf242}} 
\index{cave\_render.c@{cave\_render.c}!build\_base\_texture@{build\_base\_texture}}
\index{build\_base\_texture@{build\_base\_texture}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{build\_base\_texture()}{build\_base\_texture()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} build\+\_\+base\+\_\+texture (\begin{DoxyParamCaption}\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line 86 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{87 \{}
\DoxyCodeLine{88    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}},\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}};}
\DoxyCodeLine{89    \mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}} \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}} = \mbox{\hyperlink{stb_8h_ae5b21fb2c679007a3628ae9e87681484}{stb\_rand}}() | 0x808080;}
\DoxyCodeLine{90    \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}=0; \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}<\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}})}
\DoxyCodeLine{91       \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}=0; \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}<\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}) \{}
\DoxyCodeLine{92          \mbox{\hyperlink{structtexture}{texture}}[\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}][\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}] = (\mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}} + (\mbox{\hyperlink{stb_8h_ae5b21fb2c679007a3628ae9e87681484}{stb\_rand}}()\&0x1f1f1f))|0xff000000;}
\DoxyCodeLine{93       \}}
\DoxyCodeLine{94 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a66b14614ec4f304af8c774ed9fa2ae43}\label{cave__render_8c_a66b14614ec4f304af8c774ed9fa2ae43}} 
\index{cave\_render.c@{cave\_render.c}!build\_overlay\_texture@{build\_overlay\_texture}}
\index{build\_overlay\_texture@{build\_overlay\_texture}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{build\_overlay\_texture()}{build\_overlay\_texture()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} build\+\_\+overlay\+\_\+texture (\begin{DoxyParamCaption}\item[{int}]{n }\end{DoxyParamCaption})}



Definition at line 96 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{97 \{}
\DoxyCodeLine{98    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}},\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}};}
\DoxyCodeLine{99    \mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}} \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}} = \mbox{\hyperlink{stb_8h_ae5b21fb2c679007a3628ae9e87681484}{stb\_rand}}();}
\DoxyCodeLine{100    \textcolor{keywordflow}{if} (\mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}} \& 16)}
\DoxyCodeLine{101       \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}} = 0xff000000;}
\DoxyCodeLine{102    \textcolor{keywordflow}{else}}
\DoxyCodeLine{103       \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}} = 0xffffffff;}
\DoxyCodeLine{104    \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}=0; \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}<\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}})}
\DoxyCodeLine{105       \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}=0; \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}<\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}) \{}
\DoxyCodeLine{106          \mbox{\hyperlink{structtexture}{texture}}[\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}][\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}] = 0;}
\DoxyCodeLine{107       \}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109    \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}=0; \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}} < \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}/8; ++\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}) \{}
\DoxyCodeLine{110       \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}=0; \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}} < \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}) \{}
\DoxyCodeLine{111          \mbox{\hyperlink{structtexture}{texture}}[\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}][\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}] = \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}};}
\DoxyCodeLine{112          \mbox{\hyperlink{structtexture}{texture}}[\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}-\/1-\/\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}][\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}] = \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}};}
\DoxyCodeLine{113          \mbox{\hyperlink{structtexture}{texture}}[\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}][\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}] = \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}};}
\DoxyCodeLine{114          \mbox{\hyperlink{structtexture}{texture}}[\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}][\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}-\/1-\/\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}] = \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}};}
\DoxyCodeLine{115       \}}
\DoxyCodeLine{116    \}}
\DoxyCodeLine{117 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a7fd43582038fa12183f22d2b5bc70793}\label{cave__render_8c_a7fd43582038fa12183f22d2b5bc70793}} 
\index{cave\_render.c@{cave\_render.c}!compute\_priority@{compute\_priority}}
\index{compute\_priority@{compute\_priority}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{compute\_priority()}{compute\_priority()}}
{\footnotesize\ttfamily float compute\+\_\+priority (\begin{DoxyParamCaption}\item[{int}]{cx,  }\item[{int}]{cy,  }\item[{float}]{x,  }\item[{float}]{y }\end{DoxyParamCaption})}



Definition at line 708 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{709 \{}
\DoxyCodeLine{710    \textcolor{keywordtype}{float} distx, disty, dist2;}
\DoxyCodeLine{711    distx = (cx*16+8) -\/ \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}};}
\DoxyCodeLine{712    disty = (cy*16+8) -\/ \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}};}
\DoxyCodeLine{713    dist2 = distx*distx + disty*disty;}
\DoxyCodeLine{714    \textcolor{keywordflow}{return} \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}}*\mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}} * 16 * 16 -\/ dist2;}
\DoxyCodeLine{715 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a8da956987731d72d3d6af47e0c31ace3}\label{cave__render_8c_a8da956987731d72d3d6af47e0c31ace3}} 
\index{cave\_render.c@{cave\_render.c}!free\_chunk@{free\_chunk}}
\index{free\_chunk@{free\_chunk}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{free\_chunk()}{free\_chunk()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} free\+\_\+chunk (\begin{DoxyParamCaption}\item[{int}]{slot\+\_\+x,  }\item[{int}]{slot\+\_\+y }\end{DoxyParamCaption})}



Definition at line 128 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{129 \{}
\DoxyCodeLine{130    \mbox{\hyperlink{structchunk__mesh}{chunk\_mesh}} *cm = \&\mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[slot\_y][slot\_x];}
\DoxyCodeLine{131    \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} == \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}{STATE\_valid}}) \{}
\DoxyCodeLine{132       \mbox{\hyperlink{glad_8h_aedf2546140e2c0f0e8d6f62e9998ae73}{glDeleteTextures}}(1, \&cm-\/>\mbox{\hyperlink{structchunk__mesh_a5d94f262ea3b806f7541f81bca2b528a}{fbuf\_tex}});}
\DoxyCodeLine{133       glDeleteBuffersARB(1, \&cm-\/>\mbox{\hyperlink{structchunk__mesh_a1ed99534ee04fe22dae227b3915a8088}{vbuf}});}
\DoxyCodeLine{134       glDeleteBuffersARB(1, \&cm-\/>\mbox{\hyperlink{structchunk__mesh_a6eaa09bf4ae47f9243427093c8629af7}{fbuf}});}
\DoxyCodeLine{135       \mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[slot\_y][slot\_x].\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} = \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}{STATE\_invalid}};}
\DoxyCodeLine{136    \}}
\DoxyCodeLine{137 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a5a5da02ffa962221a8ddf7318d07a30b}\label{cave__render_8c_a5a5da02ffa962221a8ddf7318d07a30b}} 
\index{cave\_render.c@{cave\_render.c}!init\_tex2\_gradient@{init\_tex2\_gradient}}
\index{init\_tex2\_gradient@{init\_tex2\_gradient}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{init\_tex2\_gradient()}{init\_tex2\_gradient()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} init\+\_\+tex2\+\_\+gradient (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}}}]{ }\end{DoxyParamCaption})}



Definition at line 369 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{370 \{}
\DoxyCodeLine{371    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{372    \textcolor{keywordflow}{for} (i=0; i < 16; ++i) \{}
\DoxyCodeLine{373       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+ 0][0] = 64 + 12*i;}
\DoxyCodeLine{374       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+ 0][1] = 32;}
\DoxyCodeLine{375       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+ 0][2] = 64;}
\DoxyCodeLine{376 }
\DoxyCodeLine{377       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+16][0] = 255;}
\DoxyCodeLine{378       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+16][1] = 32 + 8*i;}
\DoxyCodeLine{379       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+16][2] = 64;}
\DoxyCodeLine{380 }
\DoxyCodeLine{381       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+32][0] = 255;}
\DoxyCodeLine{382       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+32][1] = 160;}
\DoxyCodeLine{383       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+32][2] = 64 + 12*i;}
\DoxyCodeLine{384 }
\DoxyCodeLine{385       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+48][0] = 255;}
\DoxyCodeLine{386       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+48][1] = 160 + 6*i;}
\DoxyCodeLine{387       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i+48][2] = 255;}
\DoxyCodeLine{388    \}}
\DoxyCodeLine{389 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a5a929f915201b0dbb791c74db8420500}\label{cave__render_8c_a5a929f915201b0dbb791c74db8420500}} 
\index{cave\_render.c@{cave\_render.c}!make\_texture\_buffer\_for\_uniform@{make\_texture\_buffer\_for\_uniform}}
\index{make\_texture\_buffer\_for\_uniform@{make\_texture\_buffer\_for\_uniform}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{make\_texture\_buffer\_for\_uniform()}{make\_texture\_buffer\_for\_uniform()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} make\+\_\+texture\+\_\+buffer\+\_\+for\+\_\+uniform (\begin{DoxyParamCaption}\item[{int}]{uniform,  }\item[{int}]{slot }\end{DoxyParamCaption})}



Definition at line 288 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{289 \{}
\DoxyCodeLine{290    \mbox{\hyperlink{glad_8h_a5d5233918a454ad3975c620a69ac5f0b}{GLenum}} \mbox{\hyperlink{glad_8h_ab7c1afc09f67635c2c376638fcc0db5f}{type}};}
\DoxyCodeLine{291    \mbox{\hyperlink{structstbvox__uniform__info}{stbvox\_uniform\_info}} raw, *ui=\&raw;}
\DoxyCodeLine{292    \mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{GLint}} uloc;}
\DoxyCodeLine{293    }
\DoxyCodeLine{294    \mbox{\hyperlink{stb__voxel__render_8h_ac6724208eddce3a25e3927abed86426e}{stbvox\_get\_uniform\_info}}(ui, uniform);}
\DoxyCodeLine{295    uloc = \mbox{\hyperlink{stb__glprog_8h_a188b0d913a30b6ebbdd3629aad89fe45}{stbgl\_find\_uniform}}(\mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}}, ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a2415f4b735714de2a830c47b825755d2}{name}});}
\DoxyCodeLine{296 }
\DoxyCodeLine{297    \textcolor{keywordflow}{if} (uniform == \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea1f8122611f70005180ede22ebffa840f}{STBVOX\_UNIFORM\_color\_table}})}
\DoxyCodeLine{298       ((\textcolor{keywordtype}{float} *)ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_ae02f04f9ac3d7412ed5f078356e8d1da}{default\_value}})[63*4+3] = 2.0f; \textcolor{comment}{// emissive}}
\DoxyCodeLine{299 }
\DoxyCodeLine{300    glGenBuffersARB(1, \&\mbox{\hyperlink{cave__render_8c_a6460fe1f8f03a28c10270f7feb90ec5a}{unibuf}}[uniform]);}
\DoxyCodeLine{301    glBindBufferARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, \mbox{\hyperlink{cave__render_8c_a6460fe1f8f03a28c10270f7feb90ec5a}{unibuf}}[uniform]);}
\DoxyCodeLine{302    glBufferDataARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a093aaf2d07ab612f0141de982090b9d4}{array\_length}} * ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a4c242fbcda577b5f2b21d8ed26d77db9}{bytes\_per\_element}}, ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_ae02f04f9ac3d7412ed5f078356e8d1da}{default\_value}}, \mbox{\hyperlink{glext_8h_a52d827f177e657db3ce0c6fdb33a94b7}{GL\_STATIC\_DRAW\_ARB}});}
\DoxyCodeLine{303    glBindBufferARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, 0);}
\DoxyCodeLine{304 }
\DoxyCodeLine{305    \mbox{\hyperlink{glad_8h_a82ac4415f852b8b5bfe7356202ca934e}{glGenTextures}}(1, \&\mbox{\hyperlink{cave__render_8c_a3c60dcdbe2df0b0c0a07efca95d43dc6}{unitex}}[uniform]);}
\DoxyCodeLine{306    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, \mbox{\hyperlink{cave__render_8c_a3c60dcdbe2df0b0c0a07efca95d43dc6}{unitex}}[uniform]);}
\DoxyCodeLine{307    \textcolor{keywordflow}{switch} (ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_ace674a6910945f28faeef4ffe114ebfb}{type}}) \{}
\DoxyCodeLine{308       \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7adf4638d7323db2e592ee2d87917cd785}{STBVOX\_UNIFORM\_TYPE\_vec2}}: \mbox{\hyperlink{glad_8h_ab7c1afc09f67635c2c376638fcc0db5f}{type}} = \mbox{\hyperlink{glad_8h_a33126276386c2faa242c6a6568244095}{GL\_RG32F}}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{309       \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7a01e4c8c453c9d498f2125eaeb26ebb5c}{STBVOX\_UNIFORM\_TYPE\_vec3}}: \mbox{\hyperlink{glad_8h_ab7c1afc09f67635c2c376638fcc0db5f}{type}} = \mbox{\hyperlink{glad_8h_ae41a95ad5a27c61fb413ec178089a803}{GL\_RGB32F}}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{310       \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7abb971ba14a3c74cddba2b40bf5cc3b8f}{STBVOX\_UNIFORM\_TYPE\_vec4}}: \mbox{\hyperlink{glad_8h_ab7c1afc09f67635c2c376638fcc0db5f}{type}} = \mbox{\hyperlink{glad_8h_ace8155682f86789a9af13e7026df4615}{GL\_RGBA32F}}; \textcolor{keywordflow}{break};}
\DoxyCodeLine{311       \textcolor{keywordflow}{default}: assert(0);}
\DoxyCodeLine{312    \}}
\DoxyCodeLine{313    glTexBufferARB(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, \mbox{\hyperlink{glad_8h_ab7c1afc09f67635c2c376638fcc0db5f}{type}}, \mbox{\hyperlink{cave__render_8c_a6460fe1f8f03a28c10270f7feb90ec5a}{unibuf}}[uniform]);}
\DoxyCodeLine{314    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, 0);}
\DoxyCodeLine{315 }
\DoxyCodeLine{316    glActiveTextureARB(\mbox{\hyperlink{glad_8h_a16cc91096144fc7048b45e2add14915b}{GL\_TEXTURE0}} + slot);}
\DoxyCodeLine{317    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, \mbox{\hyperlink{cave__render_8c_a3c60dcdbe2df0b0c0a07efca95d43dc6}{unitex}}[uniform]);}
\DoxyCodeLine{318    glActiveTextureARB(\mbox{\hyperlink{glad_8h_a16cc91096144fc7048b45e2add14915b}{GL\_TEXTURE0}});}
\DoxyCodeLine{319 }
\DoxyCodeLine{320    \mbox{\hyperlink{stb__glprog_8h_ab6c9aabf76a35fa89ef35acd64cdd1a7}{stbglUseProgram}}(\mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}});}
\DoxyCodeLine{321    \mbox{\hyperlink{stb__glprog_8h_a76ccc6fc647c6ac4f8cc4d094d4a6334}{stbglUniform1i}}(uloc, slot);}
\DoxyCodeLine{322 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a0f9a7e36ad9614200f0404d37b26b9e6}\label{cave__render_8c_a0f9a7e36ad9614200f0404d37b26b9e6}} 
\index{cave\_render.c@{cave\_render.c}!mesh\_worker\_handler@{mesh\_worker\_handler}}
\index{mesh\_worker\_handler@{mesh\_worker\_handler}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{mesh\_worker\_handler()}{mesh\_worker\_handler()}}
{\footnotesize\ttfamily int mesh\+\_\+worker\+\_\+handler (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} $\ast$}]{data }\end{DoxyParamCaption})}



Definition at line 530 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{531 \{}
\DoxyCodeLine{532    \mbox{\hyperlink{structmesh__worker}{mesh\_worker}} *mw = \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}};}
\DoxyCodeLine{533    mw-\/>\mbox{\hyperlink{structmesh__worker_ad2e5486ee67bb9178a7b26108683ba27}{face\_buffer}} = \mbox{\hyperlink{stb__leakcheck_8h_ac71ce303a4b993665ae00f1e1293ba8b}{malloc}}(\mbox{\hyperlink{caveview_8h_a4d65dca8ffc1cd92783b26732044ba59}{FACE\_BUFFER\_SIZE}});}
\DoxyCodeLine{534    mw-\/>\mbox{\hyperlink{structmesh__worker_aea00f6d6604daddd31fea087f4f4e24b}{build\_buffer}} = \mbox{\hyperlink{stb__leakcheck_8h_ac71ce303a4b993665ae00f1e1293ba8b}{malloc}}(\mbox{\hyperlink{caveview_8h_afa950acf77b651e25839f9fffcc15e3a}{BUILD\_BUFFER\_SIZE}});}
\DoxyCodeLine{535 }
\DoxyCodeLine{536    \textcolor{comment}{// this loop only works because the compiler can't}}
\DoxyCodeLine{537    \textcolor{comment}{// tell that the SDL\_calls don't access mw-\/>state;}}
\DoxyCodeLine{538    \textcolor{comment}{// really we should barrier that stuff}}
\DoxyCodeLine{539    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{540       \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{541       \textcolor{keywordtype}{int} cx,cy;}
\DoxyCodeLine{542 }
\DoxyCodeLine{543       \textcolor{comment}{// wait for a chunk request}}
\DoxyCodeLine{544       SDL\_SemWait(mw-\/>\mbox{\hyperlink{structmesh__worker_a4a16ef6832c227c1b909a178b8556e53}{request\_received}});}
\DoxyCodeLine{545 }
\DoxyCodeLine{546       \textcolor{comment}{// analyze the chunk request}}
\DoxyCodeLine{547       assert(mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} == \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531ae47531269e4c42627dba00cefad5e6bd}{WSTATE\_requested}});}
\DoxyCodeLine{548       cx = mw-\/>\mbox{\hyperlink{structmesh__worker_a37d47df427f2e7ad56dd74cfc0b6f4e9}{request\_cx}};}
\DoxyCodeLine{549       cy = mw-\/>\mbox{\hyperlink{structmesh__worker_adcde0d763e1b41efc5ba25ae6e2fc862}{request\_cy}};}
\DoxyCodeLine{550 }
\DoxyCodeLine{551       \textcolor{comment}{// this is inaccurate as it can block while another thread has the cache locked}}
\DoxyCodeLine{552       mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} = \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af060baead9e16d712b41715e70cf1817}{WSTATE\_running}};}
\DoxyCodeLine{553 }
\DoxyCodeLine{554       \textcolor{comment}{// get the chunks we need (this takes a lock and caches them)}}
\DoxyCodeLine{555       \textcolor{keywordflow}{for} (j=0; j < 4; ++j)}
\DoxyCodeLine{556          \textcolor{keywordflow}{for} (i=0; i < 4; ++i)}
\DoxyCodeLine{557             mw-\/>\mbox{\hyperlink{structmesh__worker_aa61a8c1e4335c14ce9044b58fc41b1af}{chunks}}[j][i] = \mbox{\hyperlink{cave__mesher_8c_a7c54b9b85359841f7dbe539558bc5aa5}{get\_converted\_fastchunk}}(cx-\/1 + i, cy-\/1 + j);}
\DoxyCodeLine{558 }
\DoxyCodeLine{559       \textcolor{comment}{// build the mesh based on the chunks}}
\DoxyCodeLine{560       mw-\/>\mbox{\hyperlink{structmesh__worker_adf3e50038d32c44f20308cb488ce0cab}{rm}}.\mbox{\hyperlink{structraw__mesh_aeea914666948a38adf71765721139455}{build\_buffer}} = mw-\/>\mbox{\hyperlink{structmesh__worker_aea00f6d6604daddd31fea087f4f4e24b}{build\_buffer}};}
\DoxyCodeLine{561       mw-\/>\mbox{\hyperlink{structmesh__worker_adf3e50038d32c44f20308cb488ce0cab}{rm}}.\mbox{\hyperlink{structraw__mesh_a5e8e2e14af2f1cfa02d66f7a2fcb0a81}{face\_buffer}} = mw-\/>\mbox{\hyperlink{structmesh__worker_ad2e5486ee67bb9178a7b26108683ba27}{face\_buffer}};}
\DoxyCodeLine{562       \mbox{\hyperlink{cave__mesher_8c_ab4e47a2bc64f10cabe87c675e9b2bcc5}{build\_chunk}}(cx, cy, mw-\/>\mbox{\hyperlink{structmesh__worker_aa61a8c1e4335c14ce9044b58fc41b1af}{chunks}}, \&mw-\/>\mbox{\hyperlink{structmesh__worker_adf3e50038d32c44f20308cb488ce0cab}{rm}});}
\DoxyCodeLine{563       mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} = \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af1b58a01d0b884947fc6b97377100744}{WSTATE\_mesh\_ready}};}
\DoxyCodeLine{564       \textcolor{comment}{// don't need to notify of this, because it gets polled}}
\DoxyCodeLine{565 }
\DoxyCodeLine{566       \textcolor{comment}{// when done, free the chunks}}
\DoxyCodeLine{567 }
\DoxyCodeLine{568       \textcolor{comment}{// for efficiency we just take the mutex once around the whole thing,}}
\DoxyCodeLine{569       \textcolor{comment}{// though this spreads the mutex logic over two files}}
\DoxyCodeLine{570       SDL\_LockMutex(\mbox{\hyperlink{cave__render_8c_a784ba0617dbc4eec455188b9671295aa}{chunk\_cache\_mutex}});}
\DoxyCodeLine{571       \textcolor{keywordflow}{for} (j=0; j < 4; ++j)}
\DoxyCodeLine{572          \textcolor{keywordflow}{for} (i=0; i < 4; ++i) \{}
\DoxyCodeLine{573             \mbox{\hyperlink{cave__mesher_8c_a65286ae93fc1fc5e6e88af8d2f02a731}{deref\_fastchunk}}(mw-\/>\mbox{\hyperlink{structmesh__worker_aa61a8c1e4335c14ce9044b58fc41b1af}{chunks}}[j][i]);}
\DoxyCodeLine{574             mw-\/>\mbox{\hyperlink{structmesh__worker_aa61a8c1e4335c14ce9044b58fc41b1af}{chunks}}[j][i] = \mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};}
\DoxyCodeLine{575          \}}
\DoxyCodeLine{576       SDL\_UnlockMutex(\mbox{\hyperlink{cave__render_8c_a784ba0617dbc4eec455188b9671295aa}{chunk\_cache\_mutex}});}
\DoxyCodeLine{577    \}}
\DoxyCodeLine{578    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{579 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a3a88de78ef4cee2f85236e996e8682d6}\label{cave__render_8c_a3a88de78ef4cee2f85236e996e8682d6}} 
\index{cave\_render.c@{cave\_render.c}!prepare\_threads@{prepare\_threads}}
\index{prepare\_threads@{prepare\_threads}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{prepare\_threads()}{prepare\_threads()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} prepare\+\_\+threads (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}}}]{ }\end{DoxyParamCaption})}



Definition at line 598 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{599 \{}
\DoxyCodeLine{600    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{601    \textcolor{keywordtype}{int} num\_proc = SDL\_GetCPUCount();}
\DoxyCodeLine{602 }
\DoxyCodeLine{603    \textcolor{keywordflow}{if} (num\_proc > 6)}
\DoxyCodeLine{604       \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}} = num\_proc/2;}
\DoxyCodeLine{605    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_proc > 4)}
\DoxyCodeLine{606       \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}} = 4;}
\DoxyCodeLine{607    \textcolor{keywordflow}{else} }
\DoxyCodeLine{608       \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}} = num\_proc-\/1;}
\DoxyCodeLine{609 }
\DoxyCodeLine{610 \textcolor{comment}{// @TODO}}
\DoxyCodeLine{611 \textcolor{comment}{//   Thread usage is probably pretty terrible; need to make a}}
\DoxyCodeLine{612 \textcolor{comment}{//   separate queue of needed chunks, instead of just generating}}
\DoxyCodeLine{613 \textcolor{comment}{//   one request per thread per frame, and a separate queue of}}
\DoxyCodeLine{614 \textcolor{comment}{//   results. (E.g. If it takes 1.5 frames to build mesh, thread}}
\DoxyCodeLine{615 \textcolor{comment}{//   is idle for 0.5 frames.) To fake this for now, I've just}}
\DoxyCodeLine{616 \textcolor{comment}{//   doubled the number of threads to let those serve as a 'queue',}}
\DoxyCodeLine{617 \textcolor{comment}{//   but that's dumb.}}
\DoxyCodeLine{618 }
\DoxyCodeLine{619    \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}} *= 2; \textcolor{comment}{// try to get better thread usage}}
\DoxyCodeLine{620 }
\DoxyCodeLine{621    \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}} > \mbox{\hyperlink{cave__render_8c_ab54d50961c308cab099df191eae355dc}{MAX\_MESH\_WORKERS}})}
\DoxyCodeLine{622       \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}} = \mbox{\hyperlink{cave__render_8c_ab54d50961c308cab099df191eae355dc}{MAX\_MESH\_WORKERS}};}
\DoxyCodeLine{623 }
\DoxyCodeLine{624    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}}; ++i) \{}
\DoxyCodeLine{625       \mbox{\hyperlink{structmesh__worker}{mesh\_worker}} *\mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = \&\mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\_data}}[i];}
\DoxyCodeLine{626       \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}}-\/>\mbox{\hyperlink{structmesh__worker_a4a16ef6832c227c1b909a178b8556e53}{request\_received}} = SDL\_CreateSemaphore(0);}
\DoxyCodeLine{627       \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}}-\/>chunk\_server\_done\_processing = SDL\_CreateSemaphore(0);}
\DoxyCodeLine{628       SDL\_CreateThread(\mbox{\hyperlink{cave__render_8c_a0f9a7e36ad9614200f0404d37b26b9e6}{mesh\_worker\_handler}}, \textcolor{stringliteral}{"mesh worker"}, \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}});}
\DoxyCodeLine{629    \}}
\DoxyCodeLine{630 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a89dc2c85caece8e70d773437fdc2884e}\label{cave__render_8c_a89dc2c85caece8e70d773437fdc2884e}} 
\index{cave\_render.c@{cave\_render.c}!render\_caves@{render\_caves}}
\index{render\_caves@{render\_caves}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{render\_caves()}{render\_caves()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} render\+\_\+caves (\begin{DoxyParamCaption}\item[{float}]{campos\mbox{[}3\mbox{]} }\end{DoxyParamCaption})}



Definition at line 752 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{753 \{}
\DoxyCodeLine{754    \textcolor{keywordtype}{float} \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}} = campos[0], \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}} = campos[1];}
\DoxyCodeLine{755    \textcolor{keywordtype}{int} qchunk\_x, qchunk\_y;}
\DoxyCodeLine{756    \textcolor{keywordtype}{int} cam\_x, cam\_y;}
\DoxyCodeLine{757    \textcolor{keywordtype}{int} i,j, rad;}
\DoxyCodeLine{758 }
\DoxyCodeLine{759    compute\_frustum();}
\DoxyCodeLine{760 }
\DoxyCodeLine{761    \mbox{\hyperlink{cave__render_8c_a1a7fcf5f88dd3987df4f5a83618c8487}{chunk\_locations}} = \mbox{\hyperlink{cave__render_8c_a90766e990c4a0a3299dae681bef26211}{chunks\_considered}} = \mbox{\hyperlink{cave__render_8c_aabc2460c0dbf3bb17bf2c768624a37a2}{chunks\_in\_frustum}} = 0;}
\DoxyCodeLine{762    \mbox{\hyperlink{cave__render_8c_a7eb76aa1c7fbf02b3f4cf94c13ba7836}{quads\_considered}} = \mbox{\hyperlink{cave__render_8c_a55f891b23463a28bdca885af7b70b4db}{quads\_rendered}} = 0;}
\DoxyCodeLine{763    \mbox{\hyperlink{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}{chunk\_storage\_total}} = \mbox{\hyperlink{cave__render_8c_aac1c4d107c5e708ee713ec9a6ccddc84}{chunk\_storage\_considered}} = \mbox{\hyperlink{cave__render_8c_a2a36f03ff6514a6581bbfdb8c6912a5e}{chunk\_storage\_rendered}} = 0;}
\DoxyCodeLine{764 }
\DoxyCodeLine{765    cam\_x = (int) floor(\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}+0.5);}
\DoxyCodeLine{766    cam\_y = (int) floor(\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}+0.5);}
\DoxyCodeLine{767 }
\DoxyCodeLine{768    qchunk\_x = (((int) floor(\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}})+16) >> 5) << 1;}
\DoxyCodeLine{769    qchunk\_y = (((int) floor(\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}})+16) >> 5) << 1;}
\DoxyCodeLine{770 }
\DoxyCodeLine{771    \mbox{\hyperlink{glad_8h_a3f7fa0df22505dd09a24a4e1e74eca09}{glEnable}}(\mbox{\hyperlink{gl_8h_a4fda8987c8cb3d921967cd0a5343f174}{GL\_ALPHA\_TEST}});}
\DoxyCodeLine{772    \mbox{\hyperlink{gl_8h_a32ca79bf6bda18aaf30a055c48a4fd30}{glAlphaFunc}}(\mbox{\hyperlink{glad_8h_aa3bfa1f454ff5072bc1b64e7d30e9584}{GL\_GREATER}}, 0.5);}
\DoxyCodeLine{773 }
\DoxyCodeLine{774    \mbox{\hyperlink{stb__glprog_8h_ab6c9aabf76a35fa89ef35acd64cdd1a7}{stbglUseProgram}}(\mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}});}
\DoxyCodeLine{775    \mbox{\hyperlink{cave__render_8c_a58563743e658ed82deb1c45915be5311}{setup\_uniforms}}(campos); \textcolor{comment}{// set uniforms to default values inefficiently}}
\DoxyCodeLine{776    glActiveTextureARB(\mbox{\hyperlink{glext_8h_a5c56f2e8fd1ca5abe5f47e76036ec2d5}{GL\_TEXTURE2\_ARB}});}
\DoxyCodeLine{777    \mbox{\hyperlink{stb__glprog_8h_a9c550b3836b06a4993b1401605653c7e}{stbglEnableVertexAttribArray}}(0);}
\DoxyCodeLine{778 }
\DoxyCodeLine{779    \{}
\DoxyCodeLine{780       \textcolor{keywordtype}{float} lighting[2][3] = \{ \{ campos[0],campos[1],campos[2] \}, \{ 0.75,0.75,0.65f \} \};}
\DoxyCodeLine{781       \textcolor{keywordtype}{float} bright = 8;}
\DoxyCodeLine{782       lighting[1][0] *= bright;}
\DoxyCodeLine{783       lighting[1][1] *= bright;}
\DoxyCodeLine{784       lighting[1][2] *= bright;}
\DoxyCodeLine{785       \mbox{\hyperlink{stb__glprog_8h_a252326a1e2ad9dde401ac5c6fbe12c84}{stbglUniform3fv}}(\mbox{\hyperlink{stb__glprog_8h_a188b0d913a30b6ebbdd3629aad89fe45}{stbgl\_find\_uniform}}(\mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}}, \textcolor{stringliteral}{"light\_source"}), 2, lighting[0]);}
\DoxyCodeLine{786    \}}
\DoxyCodeLine{787 }
\DoxyCodeLine{788    \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_ab714d9bf6480e3842f9174937f6257c9}{global\_hack}})}
\DoxyCodeLine{789       \mbox{\hyperlink{cave__render_8c_a780d126fbb25c976ce349b06059ecc66}{set\_tex2\_alpha}}(\mbox{\hyperlink{cave__render_8c_aae02e1ae69339213673af37e15e343b4}{tex2\_alpha}});}
\DoxyCodeLine{790 }
\DoxyCodeLine{791    \mbox{\hyperlink{cave__render_8c_a0ced74c1235cfa302b0fda9cba9682e4}{num\_meshes\_uploaded}} = 0;}
\DoxyCodeLine{792    \mbox{\hyperlink{cave__render_8c_a654d2857d277992878a8c7ff1f740282}{update\_meshes\_from\_render\_thread}}();}
\DoxyCodeLine{793 }
\DoxyCodeLine{794    \textcolor{comment}{// traverse all in-\/range chunks and analyze them}}
\DoxyCodeLine{795    \textcolor{keywordflow}{for} (j=-\/\mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}}; j <= \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}}; j += 2) \{}
\DoxyCodeLine{796       \textcolor{keywordflow}{for} (i=-\/\mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}}; i <= \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}}; i += 2) \{}
\DoxyCodeLine{797          \textcolor{keywordtype}{float} priority;}
\DoxyCodeLine{798          \textcolor{keywordtype}{int} cx = qchunk\_x + i;}
\DoxyCodeLine{799          \textcolor{keywordtype}{int} cy = qchunk\_y + j;}
\DoxyCodeLine{800 }
\DoxyCodeLine{801          priority = \mbox{\hyperlink{cave__render_8c_a7fd43582038fa12183f22d2b5bc70793}{compute\_priority}}(cx, cy, \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}, \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}});}
\DoxyCodeLine{802          \textcolor{keywordflow}{if} (priority >= \mbox{\hyperlink{cave__render_8c_a538e3a4857cf9635776e05cf1ada9a83}{min\_priority}}) \{}
\DoxyCodeLine{803             \textcolor{keywordtype}{int} slot\_x = (cx>>1) \& (\mbox{\hyperlink{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}{CACHED\_MESH\_NUM\_X}}-\/1);}
\DoxyCodeLine{804             \textcolor{keywordtype}{int} slot\_y = (cy>>1) \& (\mbox{\hyperlink{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}{CACHED\_MESH\_NUM\_Y}}-\/1);}
\DoxyCodeLine{805             \mbox{\hyperlink{structchunk__mesh}{chunk\_mesh}} *cm = \&\mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[slot\_y][slot\_x];}
\DoxyCodeLine{806             ++\mbox{\hyperlink{cave__render_8c_a1a7fcf5f88dd3987df4f5a83618c8487}{chunk\_locations}};}
\DoxyCodeLine{807             \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} == \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}{STATE\_valid}} \&\& priority >= 0) \{}
\DoxyCodeLine{808                \textcolor{comment}{// check if chunk pos actually matches}}
\DoxyCodeLine{809                \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_a2c3d88a733672817af404c4342ef34b5}{chunk\_x}} != cx || cm-\/>\mbox{\hyperlink{structchunk__mesh_a115a5548f6ce659c096d3d45defdc7d6}{chunk\_y}} != cy) \{}
\DoxyCodeLine{810                   \textcolor{comment}{// we have a stale chunk we need to recreate}}
\DoxyCodeLine{811                   \mbox{\hyperlink{cave__render_8c_a8da956987731d72d3d6af47e0c31ace3}{free\_chunk}}(slot\_x, slot\_y); \textcolor{comment}{// it probably will have already gotten freed, but just in case}}
\DoxyCodeLine{812                \}}
\DoxyCodeLine{813             \}}
\DoxyCodeLine{814             \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} == \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}{STATE\_invalid}}) \{}
\DoxyCodeLine{815                cm-\/>\mbox{\hyperlink{structchunk__mesh_a2c3d88a733672817af404c4342ef34b5}{chunk\_x}} = cx;}
\DoxyCodeLine{816                cm-\/>\mbox{\hyperlink{structchunk__mesh_a115a5548f6ce659c096d3d45defdc7d6}{chunk\_y}} = cy;}
\DoxyCodeLine{817                cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} = \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba30055d9bf9753d6c86c158dd8273ad42}{STATE\_needed}};}
\DoxyCodeLine{818             \}}
\DoxyCodeLine{819             cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} = priority;}
\DoxyCodeLine{820          \}}
\DoxyCodeLine{821       \}}
\DoxyCodeLine{822    \}}
\DoxyCodeLine{823 }
\DoxyCodeLine{824    \textcolor{comment}{// draw front-\/to-\/back}}
\DoxyCodeLine{825    \textcolor{keywordflow}{for} (rad = 0; rad <= \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}}; rad += 2) \{}
\DoxyCodeLine{826       \textcolor{keywordflow}{for} (j=-\/rad; j <= rad; j += 2) \{}
\DoxyCodeLine{827          \textcolor{comment}{// if j is +-\/ rad, then iterate i through all values}}
\DoxyCodeLine{828          \textcolor{comment}{// if j isn't +-\/rad, then i should be only -\/rad \& rad}}
\DoxyCodeLine{829          \textcolor{keywordtype}{int} \mbox{\hyperlink{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}{step}} = 2;}
\DoxyCodeLine{830          \textcolor{keywordflow}{if} (abs(j) != rad)}
\DoxyCodeLine{831             \mbox{\hyperlink{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}{step}} = 2*rad;}
\DoxyCodeLine{832          \textcolor{keywordflow}{for} (i=-\/rad; i <= rad; i += \mbox{\hyperlink{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}{step}}) \{}
\DoxyCodeLine{833             \textcolor{keywordtype}{int} cx = qchunk\_x + i;}
\DoxyCodeLine{834             \textcolor{keywordtype}{int} cy = qchunk\_y + j;}
\DoxyCodeLine{835             \textcolor{keywordtype}{int} slot\_x = (cx>>1) \& (\mbox{\hyperlink{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}{CACHED\_MESH\_NUM\_X}}-\/1);}
\DoxyCodeLine{836             \textcolor{keywordtype}{int} slot\_y = (cy>>1) \& (\mbox{\hyperlink{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}{CACHED\_MESH\_NUM\_Y}}-\/1);}
\DoxyCodeLine{837             \mbox{\hyperlink{structchunk__mesh}{chunk\_mesh}} *cm = \&\mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[slot\_y][slot\_x];}
\DoxyCodeLine{838             \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} == \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}{STATE\_valid}} \&\& cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} >= 0) \{}
\DoxyCodeLine{839                ++\mbox{\hyperlink{cave__render_8c_a90766e990c4a0a3299dae681bef26211}{chunks\_considered}};}
\DoxyCodeLine{840                \mbox{\hyperlink{cave__render_8c_a7eb76aa1c7fbf02b3f4cf94c13ba7836}{quads\_considered}} += cm-\/>\mbox{\hyperlink{structchunk__mesh_a1062810af936566385c5ba2c668e9f6a}{num\_quads}};}
\DoxyCodeLine{841                \textcolor{keywordflow}{if} (is\_box\_in\_frustum(cm-\/>\mbox{\hyperlink{structchunk__mesh_a34536b1b6efff0e258048519e0a4e33c}{bounds}}[0], cm-\/>\mbox{\hyperlink{structchunk__mesh_a34536b1b6efff0e258048519e0a4e33c}{bounds}}[1])) \{}
\DoxyCodeLine{842                   ++\mbox{\hyperlink{cave__render_8c_aabc2460c0dbf3bb17bf2c768624a37a2}{chunks\_in\_frustum}};}
\DoxyCodeLine{843 }
\DoxyCodeLine{844                   \textcolor{comment}{// @TODO if in range}}
\DoxyCodeLine{845                   \mbox{\hyperlink{stb__glprog_8h_a252326a1e2ad9dde401ac5c6fbe12c84}{stbglUniform3fv}}(\mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[\mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051eab955886cfcf0c2c881d633beeb99ad93}{STBVOX\_UNIFORM\_transform}}], 3, cm-\/>\mbox{\hyperlink{structchunk__mesh_a38970d9ccd61ecd637f8d561d3ee6749}{transform}}[0]);}
\DoxyCodeLine{846                   glBindBufferARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a1ed99534ee04fe22dae227b3915a8088}{vbuf}});}
\DoxyCodeLine{847                   \mbox{\hyperlink{glad_8h_a4c19069a22ebd709443b65a9c170be49}{glVertexAttribIPointer}}(0, 1, \mbox{\hyperlink{glad_8h_a69b1c02ba0bd93c643c6d82e0c16eb99}{GL\_UNSIGNED\_INT}}, 4, (\textcolor{keywordtype}{void}*) 0);}
\DoxyCodeLine{848                   \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a5d94f262ea3b806f7541f81bca2b528a}{fbuf\_tex}});}
\DoxyCodeLine{849                   \mbox{\hyperlink{glad_8h_a89377449aceadc060b577926b5413bd2}{glDrawArrays}}(\mbox{\hyperlink{glad_8h_a36b428225d54dd9cf2e564e5ada3ad3d}{GL\_QUADS}}, 0, cm-\/>\mbox{\hyperlink{structchunk__mesh_a1062810af936566385c5ba2c668e9f6a}{num\_quads}}*4);}
\DoxyCodeLine{850                   \mbox{\hyperlink{cave__render_8c_a55f891b23463a28bdca885af7b70b4db}{quads\_rendered}} += cm-\/>\mbox{\hyperlink{structchunk__mesh_a1062810af936566385c5ba2c668e9f6a}{num\_quads}};}
\DoxyCodeLine{851 }
\DoxyCodeLine{852                   \mbox{\hyperlink{cave__render_8c_a2a36f03ff6514a6581bbfdb8c6912a5e}{chunk\_storage\_rendered}} += cm-\/>\mbox{\hyperlink{structchunk__mesh_a4c69ff6d6b3aa9a608951009de68c3a1}{vbuf\_size}} + cm-\/>\mbox{\hyperlink{structchunk__mesh_a345fe9574e3eaac10f8ff2a4d641fdf4}{fbuf\_size}};}
\DoxyCodeLine{853                \}}
\DoxyCodeLine{854                \mbox{\hyperlink{cave__render_8c_aac1c4d107c5e708ee713ec9a6ccddc84}{chunk\_storage\_considered}} += cm-\/>\mbox{\hyperlink{structchunk__mesh_a4c69ff6d6b3aa9a608951009de68c3a1}{vbuf\_size}} + cm-\/>\mbox{\hyperlink{structchunk__mesh_a345fe9574e3eaac10f8ff2a4d641fdf4}{fbuf\_size}};}
\DoxyCodeLine{855             \}}
\DoxyCodeLine{856          \}}
\DoxyCodeLine{857       \}}
\DoxyCodeLine{858    \}}
\DoxyCodeLine{859 }
\DoxyCodeLine{860    \mbox{\hyperlink{stb__glprog_8h_a6e0cf99bd61c0ac06ddee977bf2ad82e}{stbglDisableVertexAttribArray}}(0);}
\DoxyCodeLine{861    glBindBufferARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, 0);}
\DoxyCodeLine{862    glActiveTextureARB(\mbox{\hyperlink{glext_8h_a52f7e4ad7d25b51800d52f7cf4459a39}{GL\_TEXTURE0\_ARB}});}
\DoxyCodeLine{863 }
\DoxyCodeLine{864    \mbox{\hyperlink{stb__glprog_8h_ab6c9aabf76a35fa89ef35acd64cdd1a7}{stbglUseProgram}}(0);}
\DoxyCodeLine{865    \mbox{\hyperlink{cave__render_8c_a71cf846b08a6962abf1c34ab13da6933}{num\_meshes\_started}} = 0;}
\DoxyCodeLine{866 }
\DoxyCodeLine{867    \{}
\DoxyCodeLine{868 \textcolor{preprocessor}{      \#define MAX\_QUEUE  8}}
\DoxyCodeLine{869       \textcolor{keywordtype}{float} highest\_priority[\mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{MAX\_QUEUE}}];}
\DoxyCodeLine{870       \textcolor{keywordtype}{int} highest\_i[\mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{MAX\_QUEUE}}], highest\_j[\mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{MAX\_QUEUE}}];}
\DoxyCodeLine{871       \textcolor{keywordtype}{float} lowest\_priority = \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}} * \mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}} * 16 * 16.0f;}
\DoxyCodeLine{872       \textcolor{keywordtype}{int} lowest\_i = -\/1, lowest\_j = -\/1;}
\DoxyCodeLine{873 }
\DoxyCodeLine{874       \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{MAX\_QUEUE}}; ++i) \{}
\DoxyCodeLine{875          highest\_priority[i] = \mbox{\hyperlink{cave__render_8c_a538e3a4857cf9635776e05cf1ada9a83}{min\_priority}};}
\DoxyCodeLine{876          highest\_i[i] = -\/1;}
\DoxyCodeLine{877          highest\_j[i] = -\/1;}
\DoxyCodeLine{878       \}}
\DoxyCodeLine{879 }
\DoxyCodeLine{880       \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}{CACHED\_MESH\_NUM\_Y}}; ++j) \{}
\DoxyCodeLine{881          \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}{CACHED\_MESH\_NUM\_X}}; ++i) \{}
\DoxyCodeLine{882             \mbox{\hyperlink{structchunk__mesh}{chunk\_mesh}} *cm = \&\mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[j][i];}
\DoxyCodeLine{883             \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} == \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba9403d38ed10dea456e4b628995e4583c}{STATE\_valid}}) \{}
\DoxyCodeLine{884                cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} = \mbox{\hyperlink{cave__render_8c_a7fd43582038fa12183f22d2b5bc70793}{compute\_priority}}(cm-\/>\mbox{\hyperlink{structchunk__mesh_a2c3d88a733672817af404c4342ef34b5}{chunk\_x}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a115a5548f6ce659c096d3d45defdc7d6}{chunk\_y}}, \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}, \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}});}
\DoxyCodeLine{885                \mbox{\hyperlink{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}{chunk\_storage\_total}} += cm-\/>\mbox{\hyperlink{structchunk__mesh_a4c69ff6d6b3aa9a608951009de68c3a1}{vbuf\_size}} + cm-\/>\mbox{\hyperlink{structchunk__mesh_a345fe9574e3eaac10f8ff2a4d641fdf4}{fbuf\_size}};}
\DoxyCodeLine{886                \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} < lowest\_priority) \{}
\DoxyCodeLine{887                   lowest\_priority = cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}};}
\DoxyCodeLine{888                   lowest\_i = i;}
\DoxyCodeLine{889                   lowest\_j = j;}
\DoxyCodeLine{890                \}}
\DoxyCodeLine{891             \}}
\DoxyCodeLine{892             \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} == \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba30055d9bf9753d6c86c158dd8273ad42}{STATE\_needed}}) \{}
\DoxyCodeLine{893                cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} = \mbox{\hyperlink{cave__render_8c_a7fd43582038fa12183f22d2b5bc70793}{compute\_priority}}(cm-\/>\mbox{\hyperlink{structchunk__mesh_a2c3d88a733672817af404c4342ef34b5}{chunk\_x}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a115a5548f6ce659c096d3d45defdc7d6}{chunk\_y}}, \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}, \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}});}
\DoxyCodeLine{894                \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} < \mbox{\hyperlink{cave__render_8c_a538e3a4857cf9635776e05cf1ada9a83}{min\_priority}})}
\DoxyCodeLine{895                   cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} = \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba1a69b1351d5fad0def30e9d7d44bc2f3}{STATE\_invalid}};}
\DoxyCodeLine{896                \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}} > highest\_priority[0]) \{}
\DoxyCodeLine{897                   \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{898                   highest\_priority[0] = cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}};}
\DoxyCodeLine{899                   highest\_i[0] = i;}
\DoxyCodeLine{900                   highest\_j[0] = j;}
\DoxyCodeLine{901                   \textcolor{comment}{// bubble this up to right place}}
\DoxyCodeLine{902                   \textcolor{keywordflow}{for} (k=0; k < \mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{MAX\_QUEUE}}-\/1; ++k) \{}
\DoxyCodeLine{903                      \textcolor{keywordflow}{if} (highest\_priority[k] > highest\_priority[k+1]) \{}
\DoxyCodeLine{904                         highest\_priority[k] = highest\_priority[k+1];}
\DoxyCodeLine{905                         highest\_priority[k+1] = cm-\/>\mbox{\hyperlink{structchunk__mesh_a528568b012aae49c80192ba9430def31}{priority}};}
\DoxyCodeLine{906                         highest\_i[k] = highest\_i[k+1];}
\DoxyCodeLine{907                         highest\_i[k+1] = i;}
\DoxyCodeLine{908                         highest\_j[k] = highest\_j[k+1];}
\DoxyCodeLine{909                         highest\_j[k+1] = j;}
\DoxyCodeLine{910                      \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{911                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{912                      \}}
\DoxyCodeLine{913                   \}}
\DoxyCodeLine{914                \}}
\DoxyCodeLine{915             \}}
\DoxyCodeLine{916          \}}
\DoxyCodeLine{917       \}}
\DoxyCodeLine{918 }
\DoxyCodeLine{919 }
\DoxyCodeLine{920       \textcolor{comment}{// I couldn't find any straightforward logic that avoids}}
\DoxyCodeLine{921       \textcolor{comment}{// the hysteresis problem of continually creating \& freeing}}
\DoxyCodeLine{922       \textcolor{comment}{// a block on the margin, so I just don't free a block until}}
\DoxyCodeLine{923       \textcolor{comment}{// it's out of range, but this doesn't actually correctly}}
\DoxyCodeLine{924       \textcolor{comment}{// handle when the cache is too small for the given range}}
\DoxyCodeLine{925       \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}{chunk\_storage\_total}} >= \mbox{\hyperlink{cave__render_8c_a8a1468c6c20eb6549bdb72976fbd13fe}{min\_chunk\_storage}} \&\& lowest\_i >= 0) \{}
\DoxyCodeLine{926          \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[lowest\_j][lowest\_i].priority < -\/1200) \textcolor{comment}{// -\/1000? 0?}}
\DoxyCodeLine{927             \mbox{\hyperlink{cave__render_8c_a8da956987731d72d3d6af47e0c31ace3}{free\_chunk}}(lowest\_i, lowest\_j);}
\DoxyCodeLine{928       \}}
\DoxyCodeLine{929 }
\DoxyCodeLine{930       \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}{chunk\_storage\_total}} < \mbox{\hyperlink{cave__render_8c_aaad3ccb28ec5b3ab89cdb42cd3c21771}{max\_chunk\_storage}} \&\& highest\_i[0] >= 0) \{}
\DoxyCodeLine{931          \textcolor{keywordflow}{for} (j=\mbox{\hyperlink{cave__render_8c_ab94814559b67e4a2a564087f821145ea}{MAX\_QUEUE}}-\/1; j >= 0; -\/-\/j) \{}
\DoxyCodeLine{932             \textcolor{keywordflow}{if} (highest\_j[0] >= 0) \{}
\DoxyCodeLine{933                \mbox{\hyperlink{structchunk__mesh}{chunk\_mesh}} *cm = \&\mbox{\hyperlink{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}{cached\_chunk\_mesh}}[highest\_j[j]][highest\_i[j]];}
\DoxyCodeLine{934                \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_a18386edf73cd3e3f424ea7cb0f5dab1e}{request\_chunk}}(cm-\/>\mbox{\hyperlink{structchunk__mesh_a2c3d88a733672817af404c4342ef34b5}{chunk\_x}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a115a5548f6ce659c096d3d45defdc7d6}{chunk\_y}})) \{}
\DoxyCodeLine{935                   cm-\/>\mbox{\hyperlink{structchunk__mesh_afb20c6f240e8ffbae40e299c9f2ccb1d}{state}} = \mbox{\hyperlink{cave__render_8c_ab39a415800ebd0d977c477376649649ba12236ecbf4b9525bd229902691ec52a8}{STATE\_requested}};}
\DoxyCodeLine{936                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{937                   \textcolor{comment}{// if we couldn't queue this one, skip the remainder}}
\DoxyCodeLine{938                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{939                \}}
\DoxyCodeLine{940             \}}
\DoxyCodeLine{941          \}}
\DoxyCodeLine{942       \}}
\DoxyCodeLine{943    \}}
\DoxyCodeLine{944 }
\DoxyCodeLine{945    \mbox{\hyperlink{cave__render_8c_a654d2857d277992878a8c7ff1f740282}{update\_meshes\_from\_render\_thread}}();}
\DoxyCodeLine{946 }
\DoxyCodeLine{947    \mbox{\hyperlink{cave__render_8c_a080346cc58cb8f8b780aa706f20a1bdc}{num\_threads\_active}} = 0;}
\DoxyCodeLine{948    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}}; ++i) \{}
\DoxyCodeLine{949       \mbox{\hyperlink{cave__render_8c_a080346cc58cb8f8b780aa706f20a1bdc}{num\_threads\_active}} += (\mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\_data}}[i].\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} == \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af060baead9e16d712b41715e70cf1817}{WSTATE\_running}});}
\DoxyCodeLine{950    \}}
\DoxyCodeLine{951 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a19d602180d3af1e1e3969518075548cc}\label{cave__render_8c_a19d602180d3af1e1e3969518075548cc}} 
\index{cave\_render.c@{cave\_render.c}!render\_init@{render\_init}}
\index{render\_init@{render\_init}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{render\_init()}{render\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} render\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}}}]{ }\end{DoxyParamCaption})}



Definition at line 403 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{404 \{}
\DoxyCodeLine{405    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{406    \textcolor{keywordtype}{char} *binds[] = \{ \textcolor{stringliteral}{"attr\_vertex"}, \textcolor{stringliteral}{"attr\_face"}, \mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} \};}
\DoxyCodeLine{407    \textcolor{keywordtype}{char} *\mbox{\hyperlink{wave_8c_aeb310e20c71a4ca39015f9553658d290}{vertex}};}
\DoxyCodeLine{408    \textcolor{keywordtype}{char} *fragment;}
\DoxyCodeLine{409    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}}=0,\mbox{\hyperlink{glad_8h_afa0fb1b5e976920c0abeff2dca3ed774}{h}}=0;}
\DoxyCodeLine{410 }
\DoxyCodeLine{411    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *texdata = \mbox{\hyperlink{stb__image_8c_a6e3bfbdf11886669cd2153c1136f29db}{stbi\_load}}(\textcolor{stringliteral}{"terrain.png"}, \&\mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}}, \&\mbox{\hyperlink{glad_8h_afa0fb1b5e976920c0abeff2dca3ed774}{h}}, \mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, 4);}
\DoxyCodeLine{412 }
\DoxyCodeLine{413    \mbox{\hyperlink{stb__voxel__render_8h_a1b8b7770f24477cf39260eac3ade3400}{stbvox\_init\_mesh\_maker}}(\&\mbox{\hyperlink{cave__render_8c_abee69a8c0dbc3a083193dea4dddbaf8c}{g\_mesh\_maker}});}
\DoxyCodeLine{414    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}}; ++i) \{}
\DoxyCodeLine{415       \mbox{\hyperlink{stb__voxel__render_8h_a1b8b7770f24477cf39260eac3ade3400}{stbvox\_init\_mesh\_maker}}(\&\mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\_data}}[i].rm.mm);}
\DoxyCodeLine{416    \}}
\DoxyCodeLine{417 }
\DoxyCodeLine{418    \mbox{\hyperlink{structvertex}{vertex}} = \mbox{\hyperlink{stb__voxel__render_8h_a79f9e4c051c53927e0f762910729860b}{stbvox\_get\_vertex\_shader}}();}
\DoxyCodeLine{419    fragment = \mbox{\hyperlink{stb__voxel__render_8h_a21e1e1586c93abcba24be8eb01d8fd3d}{stbvox\_get\_fragment\_shader}}();}
\DoxyCodeLine{420 }
\DoxyCodeLine{421    \{}
\DoxyCodeLine{422       \textcolor{keywordtype}{char} error\_buffer[1024];}
\DoxyCodeLine{423       \textcolor{keywordtype}{char} *main\_vertex[] = \{ \mbox{\hyperlink{wave_8c_aeb310e20c71a4ca39015f9553658d290}{vertex}}, \mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} \};}
\DoxyCodeLine{424       \textcolor{keywordtype}{char} *main\_fragment[] = \{ fragment, \mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} \};}
\DoxyCodeLine{425       \mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}} = \mbox{\hyperlink{stb__glprog_8h_a40e75cc08efa43f853e710a6462a29e2}{stbgl\_create\_program}}(main\_vertex, main\_fragment, binds, error\_buffer, \textcolor{keyword}{sizeof}(error\_buffer));}
\DoxyCodeLine{426       \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}} == 0) \{}
\DoxyCodeLine{427          \mbox{\hyperlink{cave__main_8c_aefd62d461236c6e9ced738eac9d8042c}{ods}}(\textcolor{stringliteral}{"Compile error for main shader: \%s\(\backslash\)n"}, error\_buffer);}
\DoxyCodeLine{428          assert(0);}
\DoxyCodeLine{429          exit(1);}
\DoxyCodeLine{430       \}}
\DoxyCodeLine{431    \}}
\DoxyCodeLine{432    \textcolor{comment}{//init\_index\_buffer();}}
\DoxyCodeLine{433 }
\DoxyCodeLine{434    \mbox{\hyperlink{cave__render_8c_a5a929f915201b0dbb791c74db8420500}{make\_texture\_buffer\_for\_uniform}}(\mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051eaf9b476df9befe12c8855d1ea20db22fe}{STBVOX\_UNIFORM\_texscale}}     , 3);}
\DoxyCodeLine{435    \mbox{\hyperlink{cave__render_8c_a5a929f915201b0dbb791c74db8420500}{make\_texture\_buffer\_for\_uniform}}(\mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea65f746116b3aa230da8bbb534e6cea97}{STBVOX\_UNIFORM\_texgen}}       , 4);}
\DoxyCodeLine{436    \mbox{\hyperlink{cave__render_8c_a5a929f915201b0dbb791c74db8420500}{make\_texture\_buffer\_for\_uniform}}(\mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea1f8122611f70005180ede22ebffa840f}{STBVOX\_UNIFORM\_color\_table}}  , 5);}
\DoxyCodeLine{437 }
\DoxyCodeLine{438    \mbox{\hyperlink{glad_8h_a82ac4415f852b8b5bfe7356202ca934e}{glGenTextures}}(2, \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\_tex}});}
\DoxyCodeLine{439 }
\DoxyCodeLine{440    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\_tex}}[0]);}
\DoxyCodeLine{441    glTexImage3DEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, 0, \mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}},}
\DoxyCodeLine{442                       \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}},\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}},256,}
\DoxyCodeLine{443                       0,\mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}},\mbox{\hyperlink{glad_8h_a80a33c79f69417372d65d2a65ca36d49}{GL\_UNSIGNED\_BYTE}},\mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{444    \textcolor{keywordflow}{for} (i=0; i < 256; ++i) \{}
\DoxyCodeLine{445       \textcolor{keywordflow}{if} (texdata)}
\DoxyCodeLine{446          \mbox{\hyperlink{cave__render_8c_afaed9dd655d3234c979e5cc06387c4c9}{scale\_texture}}(texdata, (i\&15)*\mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}}/16, (\mbox{\hyperlink{glad_8h_afa0fb1b5e976920c0abeff2dca3ed774}{h}}/16)*(i>>4), \mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}},\mbox{\hyperlink{glad_8h_afa0fb1b5e976920c0abeff2dca3ed774}{h}});}
\DoxyCodeLine{447       \textcolor{keywordflow}{else}}
\DoxyCodeLine{448          \mbox{\hyperlink{cave__render_8c_a3291895cb2521f7295027d4694bbf242}{build\_base\_texture}}(i);}
\DoxyCodeLine{449       glTexSubImage3DEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, 0, 0,0,i, \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}},\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}},1, \mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}}, \mbox{\hyperlink{glad_8h_a80a33c79f69417372d65d2a65ca36d49}{GL\_UNSIGNED\_BYTE}}, \mbox{\hyperlink{structtexture}{texture}}[0]);}
\DoxyCodeLine{450    \}}
\DoxyCodeLine{451    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glad_8h_a173a2b2453322dd8d613df6cf2e72480}{GL\_TEXTURE\_MIN\_FILTER}}, \mbox{\hyperlink{glad_8h_a724edc4d9d6f3c1770ff3688f0747acb}{GL\_LINEAR\_MIPMAP\_LINEAR}});}
\DoxyCodeLine{452    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glad_8h_acb47a41b5963d44826f44b7370bccc26}{GL\_TEXTURE\_MAG\_FILTER}}, \mbox{\hyperlink{glad_8h_a4e682f218130b98b27a1e33fa7325080}{GL\_LINEAR}});}
\DoxyCodeLine{453    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glext_8h_a00b65957cb070504d8e364031b176737}{GL\_TEXTURE\_MAX\_ANISOTROPY\_EXT}}, 16);}
\DoxyCodeLine{454 \textcolor{preprocessor}{   \#ifdef STBVOX\_CONFIG\_TEX1\_EDGE\_CLAMP}}
\DoxyCodeLine{455    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glad_8h_a23a0bc2909cc2f79fe7287aaa044e880}{GL\_TEXTURE\_WRAP\_S}}, \mbox{\hyperlink{glad_8h_ae90f81f48642444b4ba7fa5cacf40569}{GL\_CLAMP\_TO\_EDGE}});}
\DoxyCodeLine{456    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glad_8h_ac307a4772e1d3decd5b6f36192113ab6}{GL\_TEXTURE\_WRAP\_T}}, \mbox{\hyperlink{glad_8h_ae90f81f48642444b4ba7fa5cacf40569}{GL\_CLAMP\_TO\_EDGE}});}
\DoxyCodeLine{457 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{458 }
\DoxyCodeLine{459    glGenerateMipmapEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}});}
\DoxyCodeLine{460 }
\DoxyCodeLine{461    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\_tex}}[1]);}
\DoxyCodeLine{462    glTexImage3DEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, 0, \mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}},}
\DoxyCodeLine{463                       1,1,64,}
\DoxyCodeLine{464                       0,\mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}},\mbox{\hyperlink{glad_8h_a80a33c79f69417372d65d2a65ca36d49}{GL\_UNSIGNED\_BYTE}},\mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{465    \mbox{\hyperlink{cave__render_8c_a5a5da02ffa962221a8ddf7318d07a30b}{init\_tex2\_gradient}}();}
\DoxyCodeLine{466    \mbox{\hyperlink{cave__render_8c_a780d126fbb25c976ce349b06059ecc66}{set\_tex2\_alpha}}(0.0);}
\DoxyCodeLine{467 \textcolor{preprocessor}{   \#if 0}}
\DoxyCodeLine{468    \textcolor{keywordflow}{for} (i=0; i < 128; ++i) \{}
\DoxyCodeLine{469       \textcolor{comment}{//build\_overlay\_texture(i);}}
\DoxyCodeLine{470       glTexSubImage3DEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, 0, 0,0,i, \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}},\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}},1, \mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}}, \mbox{\hyperlink{glad_8h_a80a33c79f69417372d65d2a65ca36d49}{GL\_UNSIGNED\_BYTE}}, \mbox{\hyperlink{structtexture}{texture}}[0]);}
\DoxyCodeLine{471    \}}
\DoxyCodeLine{472 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{473    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glad_8h_a173a2b2453322dd8d613df6cf2e72480}{GL\_TEXTURE\_MIN\_FILTER}}, \mbox{\hyperlink{glad_8h_a724edc4d9d6f3c1770ff3688f0747acb}{GL\_LINEAR\_MIPMAP\_LINEAR}});}
\DoxyCodeLine{474    \mbox{\hyperlink{glad_8h_a5817fa85137822142b4951eacd0154e7}{glTexParameteri}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{glad_8h_acb47a41b5963d44826f44b7370bccc26}{GL\_TEXTURE\_MAG\_FILTER}}, \mbox{\hyperlink{glad_8h_a4e682f218130b98b27a1e33fa7325080}{GL\_LINEAR}});}
\DoxyCodeLine{475    glGenerateMipmapEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}});}
\DoxyCodeLine{476 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a18386edf73cd3e3f424ea7cb0f5dab1e}\label{cave__render_8c_a18386edf73cd3e3f424ea7cb0f5dab1e}} 
\index{cave\_render.c@{cave\_render.c}!request\_chunk@{request\_chunk}}
\index{request\_chunk@{request\_chunk}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{request\_chunk()}{request\_chunk()}}
{\footnotesize\ttfamily int request\+\_\+chunk (\begin{DoxyParamCaption}\item[{int}]{chunk\+\_\+x,  }\item[{int}]{chunk\+\_\+y }\end{DoxyParamCaption})}



Definition at line 581 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{582 \{}
\DoxyCodeLine{583    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{584    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}}; ++i) \{}
\DoxyCodeLine{585       \mbox{\hyperlink{structmesh__worker}{mesh\_worker}} *mw = \&\mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\_data}}[i];}
\DoxyCodeLine{586       \textcolor{keywordflow}{if} (mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} == \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}{WSTATE\_idle}}) \{}
\DoxyCodeLine{587          mw-\/>\mbox{\hyperlink{structmesh__worker_a37d47df427f2e7ad56dd74cfc0b6f4e9}{request\_cx}} = chunk\_x;}
\DoxyCodeLine{588          mw-\/>\mbox{\hyperlink{structmesh__worker_adcde0d763e1b41efc5ba25ae6e2fc862}{request\_cy}} = chunk\_y;}
\DoxyCodeLine{589          mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} = \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531ae47531269e4c42627dba00cefad5e6bd}{WSTATE\_requested}};}
\DoxyCodeLine{590          SDL\_SemPost(mw-\/>\mbox{\hyperlink{structmesh__worker_a4a16ef6832c227c1b909a178b8556e53}{request\_received}});}
\DoxyCodeLine{591          ++\mbox{\hyperlink{cave__render_8c_a71cf846b08a6962abf1c34ab13da6933}{num\_meshes\_started}};}
\DoxyCodeLine{592          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{593       \}}
\DoxyCodeLine{594    \}}
\DoxyCodeLine{595    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{596 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_afaed9dd655d3234c979e5cc06387c4c9}\label{cave__render_8c_afaed9dd655d3234c979e5cc06387c4c9}} 
\index{cave\_render.c@{cave\_render.c}!scale\_texture@{scale\_texture}}
\index{scale\_texture@{scale\_texture}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{scale\_texture()}{scale\_texture()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} scale\+\_\+texture (\begin{DoxyParamCaption}\item[{unsigned char $\ast$}]{src,  }\item[{int}]{x,  }\item[{int}]{y,  }\item[{int}]{w,  }\item[{int}]{h }\end{DoxyParamCaption})}



Definition at line 70 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{71 \{}
\DoxyCodeLine{72    \textcolor{keywordtype}{int} i,j,k;}
\DoxyCodeLine{73    assert(\mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}} == 256 \&\& \mbox{\hyperlink{glad_8h_afa0fb1b5e976920c0abeff2dca3ed774}{h}} == 256);}
\DoxyCodeLine{74    \textcolor{keywordflow}{for} (j=0; j < \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++j) \{}
\DoxyCodeLine{75       \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{TEX\_SIZE}}; ++i) \{}
\DoxyCodeLine{76          \mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}} \mbox{\hyperlink{glad_8h_a26942fd2ed566ef553eae82d2c109c8f}{val}}=0;}
\DoxyCodeLine{77          \textcolor{keywordflow}{for} (k=0; k < 4; ++k) \{}
\DoxyCodeLine{78             \mbox{\hyperlink{glad_8h_a26942fd2ed566ef553eae82d2c109c8f}{val}} >>= 8;}
\DoxyCodeLine{79             \mbox{\hyperlink{glad_8h_a26942fd2ed566ef553eae82d2c109c8f}{val}} += \mbox{\hyperlink{glad_8h_a72e0fdf0f845ded60b1fada9e9195cd7}{src}}[ 4*(\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}+(i>>2)) + 4*\mbox{\hyperlink{glad_8h_a713abae75276598501f75c68917c5e2d}{w}}*(\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}+(j>>2)) + k]<<24;}
\DoxyCodeLine{80          \}}
\DoxyCodeLine{81          \mbox{\hyperlink{structtexture}{texture}}[j][i] = \mbox{\hyperlink{glad_8h_a26942fd2ed566ef553eae82d2c109c8f}{val}};}
\DoxyCodeLine{82       \}}
\DoxyCodeLine{83    \}}
\DoxyCodeLine{84 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a780d126fbb25c976ce349b06059ecc66}\label{cave__render_8c_a780d126fbb25c976ce349b06059ecc66}} 
\index{cave\_render.c@{cave\_render.c}!set\_tex2\_alpha@{set\_tex2\_alpha}}
\index{set\_tex2\_alpha@{set\_tex2\_alpha}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{set\_tex2\_alpha()}{set\_tex2\_alpha()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} set\+\_\+tex2\+\_\+alpha (\begin{DoxyParamCaption}\item[{float}]{fa }\end{DoxyParamCaption})}



Definition at line 391 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{392 \{}
\DoxyCodeLine{393    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{394    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} = (int) \mbox{\hyperlink{stb_8h_a04294576726bb19173a0633324e0b17c}{stb\_lerp}}(fa, 0, 255);}
\DoxyCodeLine{395    \textcolor{keywordflow}{if} (\mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} < 0) \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} = 0; \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} > 255) \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} = 255;}
\DoxyCodeLine{396    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\_tex}}[1]);}
\DoxyCodeLine{397    \textcolor{keywordflow}{for} (i=0; i < 64; ++i) \{}
\DoxyCodeLine{398       \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i][3] = \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}};}
\DoxyCodeLine{399       glTexSubImage3DEXT(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, 0, 0,0,i, 1,1,1, \mbox{\hyperlink{glad_8h_a9f2854f4a91a0d83d2d54cb8110bfca4}{GL\_RGBA}}, \mbox{\hyperlink{glad_8h_a80a33c79f69417372d65d2a65ca36d49}{GL\_UNSIGNED\_BYTE}}, \mbox{\hyperlink{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}{tex2\_data}}[i]);}
\DoxyCodeLine{400    \}}
\DoxyCodeLine{401 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a58563743e658ed82deb1c45915be5311}\label{cave__render_8c_a58563743e658ed82deb1c45915be5311}} 
\index{cave\_render.c@{cave\_render.c}!setup\_uniforms@{setup\_uniforms}}
\index{setup\_uniforms@{setup\_uniforms}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{setup\_uniforms()}{setup\_uniforms()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} setup\+\_\+uniforms (\begin{DoxyParamCaption}\item[{float}]{pos\mbox{[}3\mbox{]} }\end{DoxyParamCaption})}



Definition at line 197 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{198 \{}
\DoxyCodeLine{199    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{200    \mbox{\hyperlink{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}{step}} += 1.0f/60.0f;}
\DoxyCodeLine{201    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea463fbe04a519703eaad7ce1434576696}{STBVOX\_UNIFORM\_count}}; ++i) \{}
\DoxyCodeLine{202       \mbox{\hyperlink{structstbvox__uniform__info}{stbvox\_uniform\_info}} raw, *ui=\&raw;}
\DoxyCodeLine{203       \mbox{\hyperlink{stb__voxel__render_8h_ac6724208eddce3a25e3927abed86426e}{stbvox\_get\_uniform\_info}}(\&raw, i);}
\DoxyCodeLine{204       \mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[i] = -\/1;}
\DoxyCodeLine{205 }
\DoxyCodeLine{206       \textcolor{keywordflow}{if} (i == \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051eaf9b476df9befe12c8855d1ea20db22fe}{STBVOX\_UNIFORM\_texscale}} || i == \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea65f746116b3aa230da8bbb534e6cea97}{STBVOX\_UNIFORM\_texgen}} || i == \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea1f8122611f70005180ede22ebffa840f}{STBVOX\_UNIFORM\_color\_table}})}
\DoxyCodeLine{207          \textcolor{keywordflow}{continue};}
\DoxyCodeLine{208 }
\DoxyCodeLine{209       \textcolor{keywordflow}{if} (ui) \{}
\DoxyCodeLine{210          \textcolor{keywordtype}{void} *\mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_ae02f04f9ac3d7412ed5f078356e8d1da}{default\_value}};}
\DoxyCodeLine{211          \mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[i] = \mbox{\hyperlink{stb__glprog_8h_a188b0d913a30b6ebbdd3629aad89fe45}{stbgl\_find\_uniform}}(\mbox{\hyperlink{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}{main\_prog}}, ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a2415f4b735714de2a830c47b825755d2}{name}});}
\DoxyCodeLine{212         \textcolor{keywordflow}{switch} (i) \{}
\DoxyCodeLine{213             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051eae4a976805a2c137e4e56be03380ea2a2}{STBVOX\_UNIFORM\_face\_data}}:}
\DoxyCodeLine{214                \mbox{\hyperlink{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}{tablei}}[0] = 2;}
\DoxyCodeLine{215                \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = \mbox{\hyperlink{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}{tablei}};}
\DoxyCodeLine{216                \textcolor{keywordflow}{break};}
\DoxyCodeLine{217 }
\DoxyCodeLine{218             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea9415362fa2fe2833bbb221c12310dc81}{STBVOX\_UNIFORM\_tex\_array}}:}
\DoxyCodeLine{219                glActiveTextureARB(\mbox{\hyperlink{glext_8h_a52f7e4ad7d25b51800d52f7cf4459a39}{GL\_TEXTURE0\_ARB}});}
\DoxyCodeLine{220                \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\_tex}}[0]);}
\DoxyCodeLine{221                glActiveTextureARB(\mbox{\hyperlink{glext_8h_affdf381031ef9f48ddf76805cdf8d0a5}{GL\_TEXTURE1\_ARB}});}
\DoxyCodeLine{222                \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a3d1b579f3fdbc2b4789bb447114c5119}{GL\_TEXTURE\_2D\_ARRAY\_EXT}}, \mbox{\hyperlink{cave__render_8c_a640ed05886b5c54012caed647bb8f728}{voxel\_tex}}[1]);}
\DoxyCodeLine{223                glActiveTextureARB(\mbox{\hyperlink{glext_8h_a52f7e4ad7d25b51800d52f7cf4459a39}{GL\_TEXTURE0\_ARB}});}
\DoxyCodeLine{224                \mbox{\hyperlink{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}{tablei}}[0] = 0;}
\DoxyCodeLine{225                \mbox{\hyperlink{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}{tablei}}[1] = 1;}
\DoxyCodeLine{226                \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = \mbox{\hyperlink{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}{tablei}};}
\DoxyCodeLine{227                \textcolor{keywordflow}{break};}
\DoxyCodeLine{228 }
\DoxyCodeLine{229             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea1f8122611f70005180ede22ebffa840f}{STBVOX\_UNIFORM\_color\_table}}:}
\DoxyCodeLine{230                \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_ae02f04f9ac3d7412ed5f078356e8d1da}{default\_value}};}
\DoxyCodeLine{231                ((\textcolor{keywordtype}{float} *)\mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}})[63*4+3] = 2.0f; \textcolor{comment}{// emissive}}
\DoxyCodeLine{232                \textcolor{keywordflow}{break};}
\DoxyCodeLine{233 }
\DoxyCodeLine{234             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea82a48737d53c36a05fdf8138c17c349f}{STBVOX\_UNIFORM\_camera\_pos}}:}
\DoxyCodeLine{235                \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = \mbox{\hyperlink{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}{table3}}[0];}
\DoxyCodeLine{236                \mbox{\hyperlink{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}{table3}}[0][0] = pos[0];}
\DoxyCodeLine{237                \mbox{\hyperlink{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}{table3}}[0][1] = pos[1];}
\DoxyCodeLine{238                \mbox{\hyperlink{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}{table3}}[0][2] = pos[2];}
\DoxyCodeLine{239                \mbox{\hyperlink{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}{table3}}[0][3] = \mbox{\hyperlink{stb_8h_a254a62dfa60c086a020a0fe83d4400e5}{stb\_max}}(0,(\textcolor{keywordtype}{float})sin(\mbox{\hyperlink{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}{step}}*2)*0.125\mbox{\hyperlink{glad_8h_a691492ec0bd6383f91200e49f6ae40ed}{f}});}
\DoxyCodeLine{240                \textcolor{keywordflow}{break};}
\DoxyCodeLine{241 }
\DoxyCodeLine{242             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a7859c0a3efa8b1c360f5c2376baf051ea87500607917aa427db2ff08fc3ea1ca8}{STBVOX\_UNIFORM\_ambient}}: \{}
\DoxyCodeLine{243                \textcolor{keywordtype}{float} bright = 1.0;}
\DoxyCodeLine{244                \textcolor{comment}{//float bright = 0.75;}}
\DoxyCodeLine{245                \textcolor{keywordtype}{float} amb[3][3];}
\DoxyCodeLine{246 }
\DoxyCodeLine{247                \textcolor{comment}{// ambient direction is sky-\/colored upwards}}
\DoxyCodeLine{248                \textcolor{comment}{// "ambient" lighting is from above}}
\DoxyCodeLine{249                \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[0][0] =  0.3f;}
\DoxyCodeLine{250                \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[0][1] = -\/0.5f;}
\DoxyCodeLine{251                \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[0][2] =  0.9f;}
\DoxyCodeLine{252 }
\DoxyCodeLine{253                amb[1][0] = 0.3f; amb[1][1] = 0.3f; amb[1][2] = 0.3f; \textcolor{comment}{// dark-\/grey}}
\DoxyCodeLine{254                amb[2][0] = 1.0; amb[2][1] = 1.0; amb[2][2] = 1.0; \textcolor{comment}{// white}}
\DoxyCodeLine{255 }
\DoxyCodeLine{256                \textcolor{comment}{// convert so (table[1]*dot+table[2]) gives}}
\DoxyCodeLine{257                \textcolor{comment}{// above interpolation}}
\DoxyCodeLine{258                \textcolor{comment}{//     lerp((dot+1)/2, amb[1], amb[2])}}
\DoxyCodeLine{259                \textcolor{comment}{//     amb[1] + (amb[2] -\/ amb[1]) * (dot+1)/2}}
\DoxyCodeLine{260                \textcolor{comment}{//     amb[1] + (amb[2] -\/ amb[1]) * dot/2 + (amb[2]-\/amb[1])/2}}
\DoxyCodeLine{261 }
\DoxyCodeLine{262                \textcolor{keywordflow}{for} (j=0; j < 3; ++j) \{}
\DoxyCodeLine{263                   \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[1][j] = (amb[2][j] -\/ amb[1][j])/2 * bright;}
\DoxyCodeLine{264                   \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[2][j] = (amb[1][j] + amb[2][j])/2 * bright;}
\DoxyCodeLine{265                \}}
\DoxyCodeLine{266 }
\DoxyCodeLine{267                \textcolor{comment}{// fog color}}
\DoxyCodeLine{268                \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[3][0] = 0.6f, \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[3][1] = 0.7f, \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[3][2] = 0.9f;}
\DoxyCodeLine{269                \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[3][3] = 1.0f / (\mbox{\hyperlink{cave__render_8c_a7287aa4341d0bc802616e36453418217}{view\_dist\_in\_chunks}} * 16);}
\DoxyCodeLine{270                \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[3][3] *= \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}}[3][3];}
\DoxyCodeLine{271 }
\DoxyCodeLine{272                \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}} = \mbox{\hyperlink{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}{table4}};}
\DoxyCodeLine{273                \textcolor{keywordflow}{break};}
\DoxyCodeLine{274             \}}
\DoxyCodeLine{275          \}}
\DoxyCodeLine{276 }
\DoxyCodeLine{277          \textcolor{keywordflow}{switch} (ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_ace674a6910945f28faeef4ffe114ebfb}{type}}) \{}
\DoxyCodeLine{278             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7ac7047970a5db6dd015b117186730c558}{STBVOX\_UNIFORM\_TYPE\_sampler}}: \mbox{\hyperlink{stb__glprog_8h_a0eba5330d9e5ff55d29746e888a501f1}{stbglUniform1iv}}(\mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[i], ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a093aaf2d07ab612f0141de982090b9d4}{array\_length}}, \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}}); \textcolor{keywordflow}{break};}
\DoxyCodeLine{279             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7adf4638d7323db2e592ee2d87917cd785}{STBVOX\_UNIFORM\_TYPE\_vec2}}:    \mbox{\hyperlink{stb__glprog_8h_af2c4135afc8285d4f68502fdb6b59171}{stbglUniform2fv}}(\mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[i], ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a093aaf2d07ab612f0141de982090b9d4}{array\_length}}, \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}}); \textcolor{keywordflow}{break};}
\DoxyCodeLine{280             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7a01e4c8c453c9d498f2125eaeb26ebb5c}{STBVOX\_UNIFORM\_TYPE\_vec3}}:    \mbox{\hyperlink{stb__glprog_8h_a252326a1e2ad9dde401ac5c6fbe12c84}{stbglUniform3fv}}(\mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[i], ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a093aaf2d07ab612f0141de982090b9d4}{array\_length}}, \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}}); \textcolor{keywordflow}{break};}
\DoxyCodeLine{281             \textcolor{keywordflow}{case} \mbox{\hyperlink{stb__voxel__render_8h_a79e9f285d34216706a748fd7ba8941b7abb971ba14a3c74cddba2b40bf5cc3b8f}{STBVOX\_UNIFORM\_TYPE\_vec4}}:    \mbox{\hyperlink{stb__glprog_8h_abe59b33d15b159f1eaa0ad71c94d72b7}{stbglUniform4fv}}(\mbox{\hyperlink{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}{uniform\_loc}}[i], ui-\/>\mbox{\hyperlink{structstbvox__uniform__info_a093aaf2d07ab612f0141de982090b9d4}{array\_length}}, \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}}); \textcolor{keywordflow}{break};}
\DoxyCodeLine{282          \}}
\DoxyCodeLine{283       \}}
\DoxyCodeLine{284    \}}
\DoxyCodeLine{285 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a654d2857d277992878a8c7ff1f740282}\label{cave__render_8c_a654d2857d277992878a8c7ff1f740282}} 
\index{cave\_render.c@{cave\_render.c}!update\_meshes\_from\_render\_thread@{update\_meshes\_from\_render\_thread}}
\index{update\_meshes\_from\_render\_thread@{update\_meshes\_from\_render\_thread}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{update\_meshes\_from\_render\_thread()}{update\_meshes\_from\_render\_thread()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} update\+\_\+meshes\+\_\+from\+\_\+render\+\_\+thread (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}}}]{ }\end{DoxyParamCaption})}



Definition at line 734 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{735 \{}
\DoxyCodeLine{736    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{737    \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}}; ++i) \{}
\DoxyCodeLine{738       \mbox{\hyperlink{structmesh__worker}{mesh\_worker}} *mw = \&\mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\_data}}[i];}
\DoxyCodeLine{739       \textcolor{keywordflow}{if} (mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} == \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af1b58a01d0b884947fc6b97377100744}{WSTATE\_mesh\_ready}}) \{}
\DoxyCodeLine{740          upload\_mesh\_data(\&mw-\/>\mbox{\hyperlink{structmesh__worker_adf3e50038d32c44f20308cb488ce0cab}{rm}});}
\DoxyCodeLine{741          ++\mbox{\hyperlink{cave__render_8c_a0ced74c1235cfa302b0fda9cba9682e4}{num\_meshes\_uploaded}};}
\DoxyCodeLine{742          mw-\/>\mbox{\hyperlink{structmesh__worker_ac696a930eac8705f16b1dd5f09139713}{state}} = \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}{WSTATE\_idle}};}
\DoxyCodeLine{743       \}}
\DoxyCodeLine{744    \}}
\DoxyCodeLine{745 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a04153b43860d9d0dacbc819ffefef9b6}\label{cave__render_8c_a04153b43860d9d0dacbc819ffefef9b6}} 
\index{cave\_render.c@{cave\_render.c}!upload\_mesh@{upload\_mesh}}
\index{upload\_mesh@{upload\_mesh}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{upload\_mesh()}{upload\_mesh()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} upload\+\_\+mesh (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structchunk__mesh}{chunk\+\_\+mesh}} $\ast$}]{cm,  }\item[{\mbox{\hyperlink{stb_8h_adde6aaee8457bee49c2a92621fe22b79}{uint8}} $\ast$}]{build\+\_\+buffer,  }\item[{\mbox{\hyperlink{stb_8h_adde6aaee8457bee49c2a92621fe22b79}{uint8}} $\ast$}]{face\+\_\+buffer }\end{DoxyParamCaption})}



Definition at line 139 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{140 \{}
\DoxyCodeLine{141    glGenBuffersARB(1, \&cm-\/>\mbox{\hyperlink{structchunk__mesh_a1ed99534ee04fe22dae227b3915a8088}{vbuf}});}
\DoxyCodeLine{142    glBindBufferARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a1ed99534ee04fe22dae227b3915a8088}{vbuf}});}
\DoxyCodeLine{143    glBufferDataARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a1062810af936566385c5ba2c668e9f6a}{num\_quads}}*4*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}}), \mbox{\hyperlink{cave__mesher_8c_a165e793676d312d0c37aa23551127f48}{build\_buffer}}, \mbox{\hyperlink{glext_8h_a52d827f177e657db3ce0c6fdb33a94b7}{GL\_STATIC\_DRAW\_ARB}});}
\DoxyCodeLine{144    glBindBufferARB(\mbox{\hyperlink{glext_8h_acb1c5ea3239de87d09959457ffa42f6f}{GL\_ARRAY\_BUFFER\_ARB}}, 0);}
\DoxyCodeLine{145 }
\DoxyCodeLine{146    glGenBuffersARB(1, \&cm-\/>\mbox{\hyperlink{structchunk__mesh_a6eaa09bf4ae47f9243427093c8629af7}{fbuf}});}
\DoxyCodeLine{147    glBindBufferARB(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a6eaa09bf4ae47f9243427093c8629af7}{fbuf}});}
\DoxyCodeLine{148    glBufferDataARB(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a1062810af936566385c5ba2c668e9f6a}{num\_quads}}*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}}), \mbox{\hyperlink{cave__mesher_8c_aa27715cf788c95d0334051f4bfe7ade9}{face\_buffer}} , \mbox{\hyperlink{glext_8h_a52d827f177e657db3ce0c6fdb33a94b7}{GL\_STATIC\_DRAW\_ARB}});}
\DoxyCodeLine{149    glBindBufferARB(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, 0);}
\DoxyCodeLine{150 }
\DoxyCodeLine{151    \mbox{\hyperlink{glad_8h_a82ac4415f852b8b5bfe7356202ca934e}{glGenTextures}}(1, \&cm-\/>\mbox{\hyperlink{structchunk__mesh_a5d94f262ea3b806f7541f81bca2b528a}{fbuf\_tex}});}
\DoxyCodeLine{152    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a5d94f262ea3b806f7541f81bca2b528a}{fbuf\_tex}});}
\DoxyCodeLine{153    glTexBufferARB(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, \mbox{\hyperlink{glad_8h_ae6a25619bdfa7ed5650b47e7094e1ef3}{GL\_RGBA8UI}}, cm-\/>\mbox{\hyperlink{structchunk__mesh_a6eaa09bf4ae47f9243427093c8629af7}{fbuf}});}
\DoxyCodeLine{154    \mbox{\hyperlink{glad_8h_a987aecafceffb9afaef11412d42e605b}{glBindTexture}}(\mbox{\hyperlink{glext_8h_a516c2e3065f87bfa599e8f521058d684}{GL\_TEXTURE\_BUFFER\_ARB}}, 0);}
\DoxyCodeLine{155 \}}

\end{DoxyCode}
\mbox{\Hypertarget{cave__render_8c_a5a106573dea6ac6f71be5e80fb56eefc}\label{cave__render_8c_a5a106573dea6ac6f71be5e80fb56eefc}} 
\index{cave\_render.c@{cave\_render.c}!world\_init@{world\_init}}
\index{world\_init@{world\_init}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{world\_init()}{world\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} world\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}}}]{ }\end{DoxyParamCaption})}



Definition at line 478 of file cave\+\_\+render.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{479 \{}
\DoxyCodeLine{480    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}},\mbox{\hyperlink{glad_8h_a0f71581a41fd2264c8944126dabbd010}{b}},\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}},\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}};}
\DoxyCodeLine{481 }
\DoxyCodeLine{482    Uint64 start\_time, end\_time;}
\DoxyCodeLine{483 \textcolor{preprocessor}{   \#ifdef NDEBUG}}
\DoxyCodeLine{484    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}} = 32;}
\DoxyCodeLine{485 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{486    \textcolor{keywordtype}{int} \mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}} = 12;}
\DoxyCodeLine{487 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{488 }
\DoxyCodeLine{489    start\_time = SDL\_GetPerformanceCounter();}
\DoxyCodeLine{490 }
\DoxyCodeLine{491    \textcolor{comment}{// iterate in 8x8 clusters of qchunks at a time to get better converted-\/chunk-\/cache reuse}}
\DoxyCodeLine{492    \textcolor{comment}{// than a purely row-\/by-\/row ordering is (single-\/threaded this is a bigger win than}}
\DoxyCodeLine{493    \textcolor{comment}{// any of the above optimizations were, since it halves zlib/mc-\/conversion costs)}}
\DoxyCodeLine{494    \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}=-\/\mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}}; \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}} <= \mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}}; \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}} += 16)}
\DoxyCodeLine{495       \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}=-\/\mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}}; \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}} <= \mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}}; \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}} += 16)}
\DoxyCodeLine{496          \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_a0f71581a41fd2264c8944126dabbd010}{b}}=\mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}; \mbox{\hyperlink{glad_8h_a0f71581a41fd2264c8944126dabbd010}{b}} < \mbox{\hyperlink{glad_8h_af2e2675ea2e0b9a7ec6a98fcb44a938a}{y}}+16 \&\& \mbox{\hyperlink{glad_8h_a0f71581a41fd2264c8944126dabbd010}{b}} <= \mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}}; \mbox{\hyperlink{glad_8h_a0f71581a41fd2264c8944126dabbd010}{b}} += 2)}
\DoxyCodeLine{497             \textcolor{keywordflow}{for} (\mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}}=\mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}; \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} < \mbox{\hyperlink{glad_8h_a1af10666aa42292f407f6acc2af11948}{x}}+16 \&\& \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} <= \mbox{\hyperlink{glad_8h_a73b00379db2c7ac5e30a3aa2954a50ee}{range}}; \mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}} += 2)}
\DoxyCodeLine{498                \textcolor{keywordflow}{while} (!\mbox{\hyperlink{cave__render_8c_a18386edf73cd3e3f424ea7cb0f5dab1e}{request\_chunk}}(\mbox{\hyperlink{glad_8h_a3309789fc188587d666cda5ece79cf82}{a}}, \mbox{\hyperlink{glad_8h_a0f71581a41fd2264c8944126dabbd010}{b}})) \{ \textcolor{comment}{// if request fails, all threads are busy}}
\DoxyCodeLine{499                   \mbox{\hyperlink{cave__render_8c_a654d2857d277992878a8c7ff1f740282}{update\_meshes\_from\_render\_thread}}();}
\DoxyCodeLine{500                   SDL\_Delay(1);}
\DoxyCodeLine{501                \}}
\DoxyCodeLine{502 }
\DoxyCodeLine{503    \textcolor{comment}{// wait until all the workers are done,}}
\DoxyCodeLine{504    \textcolor{comment}{// (this is only needed if we want to time}}
\DoxyCodeLine{505    \textcolor{comment}{// when the build finishes, or when we want to reset the}}
\DoxyCodeLine{506    \textcolor{comment}{// cache size; otherwise we could just go ahead and}}
\DoxyCodeLine{507    \textcolor{comment}{// start rendering whatever we've got)}}
\DoxyCodeLine{508    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{509       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{510       \mbox{\hyperlink{cave__render_8c_a654d2857d277992878a8c7ff1f740282}{update\_meshes\_from\_render\_thread}}();}
\DoxyCodeLine{511       \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}}; ++i)}
\DoxyCodeLine{512          \textcolor{keywordflow}{if} (\mbox{\hyperlink{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}{mesh\_data}}[i].state != \mbox{\hyperlink{cave__render_8c_ae33c78feb670de33d2abf21ec0624531af3fbd3dcee01d8d3f4a3b08150f8f159}{WSTATE\_idle}})}
\DoxyCodeLine{513             \textcolor{keywordflow}{break};}
\DoxyCodeLine{514       \textcolor{keywordflow}{if} (i == \mbox{\hyperlink{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}{num\_mesh\_workers}})}
\DoxyCodeLine{515          \textcolor{keywordflow}{break};}
\DoxyCodeLine{516       SDL\_Delay(3);}
\DoxyCodeLine{517    \}}
\DoxyCodeLine{518 }
\DoxyCodeLine{519    end\_time = SDL\_GetPerformanceCounter();}
\DoxyCodeLine{520    \mbox{\hyperlink{cave__main_8c_aefd62d461236c6e9ced738eac9d8042c}{ods}}(\textcolor{stringliteral}{"Build time: \%7.2fs\(\backslash\)n"}, (end\_time -\/ start\_time) / (\textcolor{keywordtype}{float}) SDL\_GetPerformanceFrequency());}
\DoxyCodeLine{521 }
\DoxyCodeLine{522    \textcolor{comment}{// don't waste lots of storage on chunk caches once it's finished starting-\/up;}}
\DoxyCodeLine{523    \textcolor{comment}{// this was only needed to be this large because we worked in large blocks}}
\DoxyCodeLine{524    \textcolor{comment}{// to maximize sharing}}
\DoxyCodeLine{525    \mbox{\hyperlink{cave__mesher_8c_af74c70130c88949f4d2bac551594d41f}{reset\_cache\_size}}(32);}
\DoxyCodeLine{526 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}\label{cave__render_8c_acbd6ac4d8dd8e0747a1d33adb6bb90f5}} 
\index{cave\_render.c@{cave\_render.c}!cached\_chunk\_mesh@{cached\_chunk\_mesh}}
\index{cached\_chunk\_mesh@{cached\_chunk\_mesh}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{cached\_chunk\_mesh}{cached\_chunk\_mesh}}
{\footnotesize\ttfamily \mbox{\hyperlink{structchunk__mesh}{chunk\+\_\+mesh}} cached\+\_\+chunk\+\_\+mesh\mbox{[}\mbox{\hyperlink{cave__render_8c_ab63e500c94da0daaf2114b8168f3bd06}{C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+Y}}\mbox{]}\mbox{[}\mbox{\hyperlink{cave__render_8c_a8fa3a95e690c74108521420c97453ac8}{C\+A\+C\+H\+E\+D\+\_\+\+M\+E\+S\+H\+\_\+\+N\+U\+M\+\_\+X}}\mbox{]}}



Definition at line 126 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a784ba0617dbc4eec455188b9671295aa}\label{cave__render_8c_a784ba0617dbc4eec455188b9671295aa}} 
\index{cave\_render.c@{cave\_render.c}!chunk\_cache\_mutex@{chunk\_cache\_mutex}}
\index{chunk\_cache\_mutex@{chunk\_cache\_mutex}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunk\_cache\_mutex}{chunk\_cache\_mutex}}
{\footnotesize\ttfamily S\+D\+L\+\_\+mutex$\ast$ chunk\+\_\+cache\+\_\+mutex}



Definition at line 522 of file cave\+\_\+mesher.\+c.

\mbox{\Hypertarget{cave__render_8c_a1a7fcf5f88dd3987df4f5a83618c8487}\label{cave__render_8c_a1a7fcf5f88dd3987df4f5a83618c8487}} 
\index{cave\_render.c@{cave\_render.c}!chunk\_locations@{chunk\_locations}}
\index{chunk\_locations@{chunk\_locations}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunk\_locations}{chunk\_locations}}
{\footnotesize\ttfamily int chunk\+\_\+locations}



Definition at line 717 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a9605ff44e577ffadbd55c8a55fc4ea5a}\label{cave__render_8c_a9605ff44e577ffadbd55c8a55fc4ea5a}} 
\index{cave\_render.c@{cave\_render.c}!chunk\_server\_activity@{chunk\_server\_activity}}
\index{chunk\_server\_activity@{chunk\_server\_activity}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunk\_server\_activity}{chunk\_server\_activity}}
{\footnotesize\ttfamily float chunk\+\_\+server\+\_\+activity}



Definition at line 750 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_aac1c4d107c5e708ee713ec9a6ccddc84}\label{cave__render_8c_aac1c4d107c5e708ee713ec9a6ccddc84}} 
\index{cave\_render.c@{cave\_render.c}!chunk\_storage\_considered@{chunk\_storage\_considered}}
\index{chunk\_storage\_considered@{chunk\_storage\_considered}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunk\_storage\_considered}{chunk\_storage\_considered}}
{\footnotesize\ttfamily int chunk\+\_\+storage\+\_\+considered}



Definition at line 719 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a2a36f03ff6514a6581bbfdb8c6912a5e}\label{cave__render_8c_a2a36f03ff6514a6581bbfdb8c6912a5e}} 
\index{cave\_render.c@{cave\_render.c}!chunk\_storage\_rendered@{chunk\_storage\_rendered}}
\index{chunk\_storage\_rendered@{chunk\_storage\_rendered}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunk\_storage\_rendered}{chunk\_storage\_rendered}}
{\footnotesize\ttfamily int chunk\+\_\+storage\+\_\+rendered}



Definition at line 719 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}\label{cave__render_8c_a6289a09b47b1176d64fa499faa7c73ce}} 
\index{cave\_render.c@{cave\_render.c}!chunk\_storage\_total@{chunk\_storage\_total}}
\index{chunk\_storage\_total@{chunk\_storage\_total}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunk\_storage\_total}{chunk\_storage\_total}}
{\footnotesize\ttfamily int chunk\+\_\+storage\+\_\+total}



Definition at line 719 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a90766e990c4a0a3299dae681bef26211}\label{cave__render_8c_a90766e990c4a0a3299dae681bef26211}} 
\index{cave\_render.c@{cave\_render.c}!chunks\_considered@{chunks\_considered}}
\index{chunks\_considered@{chunks\_considered}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunks\_considered}{chunks\_considered}}
{\footnotesize\ttfamily int chunks\+\_\+considered}



Definition at line 717 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_aabc2460c0dbf3bb17bf2c768624a37a2}\label{cave__render_8c_aabc2460c0dbf3bb17bf2c768624a37a2}} 
\index{cave\_render.c@{cave\_render.c}!chunks\_in\_frustum@{chunks\_in\_frustum}}
\index{chunks\_in\_frustum@{chunks\_in\_frustum}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{chunks\_in\_frustum}{chunks\_in\_frustum}}
{\footnotesize\ttfamily int chunks\+\_\+in\+\_\+frustum}



Definition at line 717 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_abee69a8c0dbc3a083193dea4dddbaf8c}\label{cave__render_8c_abee69a8c0dbc3a083193dea4dddbaf8c}} 
\index{cave\_render.c@{cave\_render.c}!g\_mesh\_maker@{g\_mesh\_maker}}
\index{g\_mesh\_maker@{g\_mesh\_maker}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{g\_mesh\_maker}{g\_mesh\_maker}}
{\footnotesize\ttfamily \mbox{\hyperlink{structstbvox__mesh__maker}{stbvox\+\_\+mesh\+\_\+maker}} g\+\_\+mesh\+\_\+maker}



Definition at line 28 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_ab714d9bf6480e3842f9174937f6257c9}\label{cave__render_8c_ab714d9bf6480e3842f9174937f6257c9}} 
\index{cave\_render.c@{cave\_render.c}!global\_hack@{global\_hack}}
\index{global\_hack@{global\_hack}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{global\_hack}{global\_hack}}
{\footnotesize\ttfamily int global\+\_\+hack}



Definition at line 349 of file cave\+\_\+main.\+c.

\mbox{\Hypertarget{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}\label{cave__render_8c_a98050f44d02d9c2ee70b8435c84d82e5}} 
\index{cave\_render.c@{cave\_render.c}!main\_prog@{main\_prog}}
\index{main\_prog@{main\_prog}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{main\_prog}{main\_prog}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} main\+\_\+prog}



Definition at line 30 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_aaad3ccb28ec5b3ab89cdb42cd3c21771}\label{cave__render_8c_aaad3ccb28ec5b3ab89cdb42cd3c21771}} 
\index{cave\_render.c@{cave\_render.c}!max\_chunk\_storage@{max\_chunk\_storage}}
\index{max\_chunk\_storage@{max\_chunk\_storage}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{max\_chunk\_storage}{max\_chunk\_storage}}
{\footnotesize\ttfamily int max\+\_\+chunk\+\_\+storage = 900 $<$$<$ 20}



Definition at line 726 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}\label{cave__render_8c_a285a49a21e43d98e9f7ea0f052a733dc}} 
\index{cave\_render.c@{cave\_render.c}!mesh\_data@{mesh\_data}}
\index{mesh\_data@{mesh\_data}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{mesh\_data}{mesh\_data}}
{\footnotesize\ttfamily \mbox{\hyperlink{structmesh__worker}{mesh\+\_\+worker}} mesh\+\_\+data\mbox{[}\mbox{\hyperlink{cave__render_8c_ab54d50961c308cab099df191eae355dc}{M\+A\+X\+\_\+\+M\+E\+S\+H\+\_\+\+W\+O\+R\+K\+E\+RS}}\mbox{]}}



Definition at line 361 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a8a1468c6c20eb6549bdb72976fbd13fe}\label{cave__render_8c_a8a1468c6c20eb6549bdb72976fbd13fe}} 
\index{cave\_render.c@{cave\_render.c}!min\_chunk\_storage@{min\_chunk\_storage}}
\index{min\_chunk\_storage@{min\_chunk\_storage}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{min\_chunk\_storage}{min\_chunk\_storage}}
{\footnotesize\ttfamily int min\+\_\+chunk\+\_\+storage = 800 $<$$<$ 20}



Definition at line 727 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a538e3a4857cf9635776e05cf1ada9a83}\label{cave__render_8c_a538e3a4857cf9635776e05cf1ada9a83}} 
\index{cave\_render.c@{cave\_render.c}!min\_priority@{min\_priority}}
\index{min\_priority@{min\_priority}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{min\_priority}{min\_priority}}
{\footnotesize\ttfamily float min\+\_\+priority = -\/500}



Definition at line 730 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_af8de331bce440ec054d598cba1453d65}\label{cave__render_8c_af8de331bce440ec054d598cba1453d65}} 
\index{cave\_render.c@{cave\_render.c}!num\_chunk\_load\_workers@{num\_chunk\_load\_workers}}
\index{num\_chunk\_load\_workers@{num\_chunk\_load\_workers}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{num\_chunk\_load\_workers}{num\_chunk\_load\_workers}}
{\footnotesize\ttfamily int num\+\_\+chunk\+\_\+load\+\_\+workers}



Definition at line 328 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}\label{cave__render_8c_a7cd3d17270efa49416663f4e571144cc}} 
\index{cave\_render.c@{cave\_render.c}!num\_mesh\_workers@{num\_mesh\_workers}}
\index{num\_mesh\_workers@{num\_mesh\_workers}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{num\_mesh\_workers}{num\_mesh\_workers}}
{\footnotesize\ttfamily int num\+\_\+mesh\+\_\+workers}



Definition at line 327 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a71cf846b08a6962abf1c34ab13da6933}\label{cave__render_8c_a71cf846b08a6962abf1c34ab13da6933}} 
\index{cave\_render.c@{cave\_render.c}!num\_meshes\_started@{num\_meshes\_started}}
\index{num\_meshes\_started@{num\_meshes\_started}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{num\_meshes\_started}{num\_meshes\_started}}
{\footnotesize\ttfamily int num\+\_\+meshes\+\_\+started}



Definition at line 362 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a0ced74c1235cfa302b0fda9cba9682e4}\label{cave__render_8c_a0ced74c1235cfa302b0fda9cba9682e4}} 
\index{cave\_render.c@{cave\_render.c}!num\_meshes\_uploaded@{num\_meshes\_uploaded}}
\index{num\_meshes\_uploaded@{num\_meshes\_uploaded}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{num\_meshes\_uploaded}{num\_meshes\_uploaded}}
{\footnotesize\ttfamily int num\+\_\+meshes\+\_\+uploaded}



Definition at line 732 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a080346cc58cb8f8b780aa706f20a1bdc}\label{cave__render_8c_a080346cc58cb8f8b780aa706f20a1bdc}} 
\index{cave\_render.c@{cave\_render.c}!num\_threads\_active@{num\_threads\_active}}
\index{num\_threads\_active@{num\_threads\_active}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{num\_threads\_active}{num\_threads\_active}}
{\footnotesize\ttfamily int num\+\_\+threads\+\_\+active}



Definition at line 749 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a7eb76aa1c7fbf02b3f4cf94c13ba7836}\label{cave__render_8c_a7eb76aa1c7fbf02b3f4cf94c13ba7836}} 
\index{cave\_render.c@{cave\_render.c}!quads\_considered@{quads\_considered}}
\index{quads\_considered@{quads\_considered}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{quads\_considered}{quads\_considered}}
{\footnotesize\ttfamily int quads\+\_\+considered}



Definition at line 718 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a55f891b23463a28bdca885af7b70b4db}\label{cave__render_8c_a55f891b23463a28bdca885af7b70b4db}} 
\index{cave\_render.c@{cave\_render.c}!quads\_rendered@{quads\_rendered}}
\index{quads\_rendered@{quads\_rendered}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{quads\_rendered}{quads\_rendered}}
{\footnotesize\ttfamily int quads\+\_\+rendered}



Definition at line 718 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}\label{cave__render_8c_a863c86bdfd96bf9c461846689c2614aa}} 
\index{cave\_render.c@{cave\_render.c}!step@{step}}
\index{step@{step}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{step}{step}}
{\footnotesize\ttfamily float step =0}



Definition at line 189 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}\label{cave__render_8c_a0f3c49c8f8b187d2d310c902822432b6}} 
\index{cave\_render.c@{cave\_render.c}!table3@{table3}}
\index{table3@{table3}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{table3}{table3}}
{\footnotesize\ttfamily float table3\mbox{[}128\mbox{]}\mbox{[}3\mbox{]}}



Definition at line 185 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}\label{cave__render_8c_a96bdfd9e85387ecce53e8fa92a52929b}} 
\index{cave\_render.c@{cave\_render.c}!table4@{table4}}
\index{table4@{table4}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{table4}{table4}}
{\footnotesize\ttfamily float table4\mbox{[}64\mbox{]}\mbox{[}4\mbox{]}}



Definition at line 186 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}\label{cave__render_8c_a7eb3f02b1e3e7b5c9384c752f7bdb967}} 
\index{cave\_render.c@{cave\_render.c}!tablei@{tablei}}
\index{tablei@{tablei}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{tablei}{tablei}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{G\+Lint}} tablei\mbox{[}2\mbox{]}}



Definition at line 187 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_aae02e1ae69339213673af37e15e343b4}\label{cave__render_8c_aae02e1ae69339213673af37e15e343b4}} 
\index{cave\_render.c@{cave\_render.c}!tex2\_alpha@{tex2\_alpha}}
\index{tex2\_alpha@{tex2\_alpha}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{tex2\_alpha}{tex2\_alpha}}
{\footnotesize\ttfamily float tex2\+\_\+alpha}



Definition at line 344 of file cave\+\_\+main.\+c.

\mbox{\Hypertarget{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}\label{cave__render_8c_a1c5d66875c3c3893bc067af48dd76966}} 
\index{cave\_render.c@{cave\_render.c}!tex2\_data@{tex2\_data}}
\index{tex2\_data@{tex2\_data}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{tex2\_data}{tex2\_data}}
{\footnotesize\ttfamily unsigned char tex2\+\_\+data\mbox{[}64\mbox{]}\mbox{[}4\mbox{]}}



Definition at line 367 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a7bd3b5acd72e44b1cfcd5e9c47744df1}\label{cave__render_8c_a7bd3b5acd72e44b1cfcd5e9c47744df1}} 
\index{cave\_render.c@{cave\_render.c}!texture@{texture}}
\index{texture@{texture}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{texture}{texture}}
{\footnotesize\ttfamily \mbox{\hyperlink{stb_8h_a1134b580f8da4de94ca6b1de4d37975e}{uint32}} \mbox{\hyperlink{structtexture}{texture}}\mbox{[}\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{T\+E\+X\+\_\+\+S\+I\+ZE}}\mbox{]}\mbox{[}\mbox{\hyperlink{cave__render_8c_a56dce54d2eef141faab9d338d77e9902}{T\+E\+X\+\_\+\+S\+I\+ZE}}\mbox{]}}



Definition at line 38 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a6460fe1f8f03a28c10270f7feb90ec5a}\label{cave__render_8c_a6460fe1f8f03a28c10270f7feb90ec5a}} 
\index{cave\_render.c@{cave\_render.c}!unibuf@{unibuf}}
\index{unibuf@{unibuf}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{unibuf}{unibuf}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} unibuf\mbox{[}64\mbox{]}}



Definition at line 287 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}\label{cave__render_8c_a2c4b0dabe154aae79a7efd8428a6700a}} 
\index{cave\_render.c@{cave\_render.c}!uniform\_loc@{uniform\_loc}}
\index{uniform\_loc@{uniform\_loc}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{uniform\_loc}{uniform\_loc}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{G\+Lint}} uniform\+\_\+loc\mbox{[}16\mbox{]}}



Definition at line 184 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a0a49f812024b3918eb53c67d24855f71}\label{cave__render_8c_a0a49f812024b3918eb53c67d24855f71}} 
\index{cave\_render.c@{cave\_render.c}!uniform\_locations@{uniform\_locations}}
\index{uniform\_locations@{uniform\_locations}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{uniform\_locations}{uniform\_locations}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_acebcc1c5663f14ebde1d16831e5fed94}{G\+Lint}} uniform\+\_\+locations\mbox{[}64\mbox{]}}



Definition at line 31 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a3c60dcdbe2df0b0c0a07efca95d43dc6}\label{cave__render_8c_a3c60dcdbe2df0b0c0a07efca95d43dc6}} 
\index{cave\_render.c@{cave\_render.c}!unitex@{unitex}}
\index{unitex@{unitex}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{unitex}{unitex}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} unitex\mbox{[}64\mbox{]}}



Definition at line 287 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a04a50dab765fa9f8b75814989b798eb4}\label{cave__render_8c_a04a50dab765fa9f8b75814989b798eb4}} 
\index{cave\_render.c@{cave\_render.c}!update\_frustum@{update\_frustum}}
\index{update\_frustum@{update\_frustum}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{update\_frustum}{update\_frustum}}
{\footnotesize\ttfamily int update\+\_\+frustum = 1}



Definition at line 720 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a7287aa4341d0bc802616e36453418217}\label{cave__render_8c_a7287aa4341d0bc802616e36453418217}} 
\index{cave\_render.c@{cave\_render.c}!view\_dist\_in\_chunks@{view\_dist\_in\_chunks}}
\index{view\_dist\_in\_chunks@{view\_dist\_in\_chunks}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{view\_dist\_in\_chunks}{view\_dist\_in\_chunks}}
{\footnotesize\ttfamily int view\+\_\+dist\+\_\+in\+\_\+chunks = 80}



Definition at line 194 of file cave\+\_\+render.\+c.

\mbox{\Hypertarget{cave__render_8c_a640ed05886b5c54012caed647bb8f728}\label{cave__render_8c_a640ed05886b5c54012caed647bb8f728}} 
\index{cave\_render.c@{cave\_render.c}!voxel\_tex@{voxel\_tex}}
\index{voxel\_tex@{voxel\_tex}!cave\_render.c@{cave\_render.c}}
\doxysubsubsection{\texorpdfstring{voxel\_tex}{voxel\_tex}}
{\footnotesize\ttfamily \mbox{\hyperlink{glad_8h_a68c4714e43d8e827d80759f9cb864f3c}{G\+Luint}} voxel\+\_\+tex\mbox{[}2\mbox{]}}



Definition at line 40 of file cave\+\_\+render.\+c.

