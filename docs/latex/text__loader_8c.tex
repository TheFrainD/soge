\hypertarget{text__loader_8c}{}\doxysection{src/vally/resources/text\+\_\+loader.c File Reference}
\label{text__loader_8c}\index{src/vally/resources/text\_loader.c@{src/vally/resources/text\_loader.c}}
{\ttfamily \#include $<$vally/resources/text\+\_\+loader.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/logger.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
char $\ast$ \mbox{\hyperlink{text__loader_8c_a0288aab1293bca79a1e50b5a5674fe24}{load\+\_\+text\+\_\+file}} (const char $\ast$path)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{text__loader_8c_a0288aab1293bca79a1e50b5a5674fe24}\label{text__loader_8c_a0288aab1293bca79a1e50b5a5674fe24}} 
\index{text\_loader.c@{text\_loader.c}!load\_text\_file@{load\_text\_file}}
\index{load\_text\_file@{load\_text\_file}!text\_loader.c@{text\_loader.c}}
\doxysubsubsection{\texorpdfstring{load\_text\_file()}{load\_text\_file()}}
{\footnotesize\ttfamily char $\ast$ load\+\_\+text\+\_\+file (\begin{DoxyParamCaption}\item[{const char $\ast$}]{path }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{text__loader_8c_source_l00008}{8}} of file \mbox{\hyperlink{text__loader_8c_source}{text\+\_\+loader.\+c}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00008                                        \{}
\DoxyCodeLine{00009   FILE *file;}
\DoxyCodeLine{00010   \textcolor{keywordtype}{long} length;}
\DoxyCodeLine{00011   \textcolor{keywordtype}{char} *\mbox{\hyperlink{structbuffer}{buffer}};}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013   \textcolor{comment}{// Open the file}}
\DoxyCodeLine{00014   file = fopen(path, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{00015   \textcolor{keywordflow}{if} (!file) \{}
\DoxyCodeLine{00016     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"{}Could not load file at \(\backslash\)"{}\%s\(\backslash\)"{}!"{}}, path);}
\DoxyCodeLine{00017     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00018   \}}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020   \textcolor{comment}{// Calculate buffer's length}}
\DoxyCodeLine{00021   fseek(file, 0, SEEK\_END);}
\DoxyCodeLine{00022   length = ftell(file);}
\DoxyCodeLine{00023   rewind(file);}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025   \textcolor{comment}{// Allocate memory for the buffer}}
\DoxyCodeLine{00026   \mbox{\hyperlink{structbuffer}{buffer}} = calloc(1, length + 1);}
\DoxyCodeLine{00027   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structbuffer}{buffer}}) \{}
\DoxyCodeLine{00028     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"{}Could not lallocate memory for buffer \(\backslash\)"{}\%s\(\backslash\)"{}!"{}}, path);}
\DoxyCodeLine{00029     fclose(file);}
\DoxyCodeLine{00030     \textcolor{keywordflow}{return} \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00031   \}}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033   \textcolor{comment}{// Read the file into the buffer}}
\DoxyCodeLine{00034   fread(\mbox{\hyperlink{structbuffer}{buffer}}, 1, length, file);}
\DoxyCodeLine{00035   fclose(file);}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037   \textcolor{keywordflow}{return} \mbox{\hyperlink{structbuffer}{buffer}};}
\DoxyCodeLine{00038 \}}

\end{DoxyCode}
