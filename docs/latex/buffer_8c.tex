\hypertarget{buffer_8c}{}\doxysection{src/vally/renderer/buffer.c File Reference}
\label{buffer_8c}\index{src/vally/renderer/buffer.c@{src/vally/renderer/buffer.c}}
{\ttfamily \#include $<$vally/renderer/buffer.\+h$>$}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$glad/glad.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/logger.\+h$>$}\newline
{\ttfamily \#include $<$vally/renderer/renderer.\+h$>$}\newline
{\ttfamily \#include $<$vally/resources/resources.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{structbuffer}{buffer}} $\ast$ \mbox{\hyperlink{buffer_8c_ae7ebc5e27c2b8f51dc67c8e1d8ee27b1}{buffer\+\_\+create}} ()
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{buffer_8c_a537219af5df0e5eda574b334834490c5}{buffer\+\_\+destroy}} (\mbox{\hyperlink{structbuffer}{buffer}} $\ast$\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{buffer_8c_a271c0cbf852a1bf93af8d27b78bc2d5c}{buffer\+\_\+bind}} (\mbox{\hyperlink{structbuffer}{buffer}} $\ast$\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}})
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{buffer_8c_a819e182a31edeb87b39af26beb49f24e}{buffer\+\_\+unbind}} ()
\item 
\mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} \mbox{\hyperlink{buffer_8c_a1167efc273616c5dc7541d68a5488ed4}{buffer\+\_\+set\+\_\+data}} (\mbox{\hyperlink{structbuffer}{buffer}} $\ast$\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}, \mbox{\hyperlink{include_2vally_2config_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}} \mbox{\hyperlink{glad_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}, const \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} $\ast$\mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{buffer_8c_a271c0cbf852a1bf93af8d27b78bc2d5c}\label{buffer_8c_a271c0cbf852a1bf93af8d27b78bc2d5c}} 
\index{buffer.c@{buffer.c}!buffer\_bind@{buffer\_bind}}
\index{buffer\_bind@{buffer\_bind}!buffer.c@{buffer.c}}
\doxysubsubsection{\texorpdfstring{buffer\_bind()}{buffer\_bind()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} buffer\+\_\+bind (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structbuffer}{buffer}} $\ast$}]{buf }\end{DoxyParamCaption})}



Definition at line 67 of file buffer.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{67                               \{}
\DoxyCodeLine{68   \mbox{\hyperlink{glad_8h_a4c13098a615d32e7f04aa4105149564f}{glBindVertexArray}}(\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vao);}
\DoxyCodeLine{69 \}}

\end{DoxyCode}
\mbox{\Hypertarget{buffer_8c_ae7ebc5e27c2b8f51dc67c8e1d8ee27b1}\label{buffer_8c_ae7ebc5e27c2b8f51dc67c8e1d8ee27b1}} 
\index{buffer.c@{buffer.c}!buffer\_create@{buffer\_create}}
\index{buffer\_create@{buffer\_create}!buffer.c@{buffer.c}}
\doxysubsubsection{\texorpdfstring{buffer\_create()}{buffer\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structbuffer}{buffer}}$\ast$ buffer\+\_\+create (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 12 of file buffer.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{12                         \{}
\DoxyCodeLine{13   \mbox{\hyperlink{structbuffer}{buffer}} *\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}} = (\mbox{\hyperlink{structbuffer}{buffer}} *)\mbox{\hyperlink{stb__leakcheck_8h_ac71ce303a4b993665ae00f1e1293ba8b}{malloc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structbuffer}{buffer}}));}
\DoxyCodeLine{14 }
\DoxyCodeLine{15   \mbox{\hyperlink{glad_8h_a71a2d01a12606fc26c1a28dba23dfce2}{glGenVertexArrays}}(1, \&\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vao);}
\DoxyCodeLine{16   \mbox{\hyperlink{glad_8h_a1b33d322b89d94ad4938461db0a0424a}{glGenBuffers}}(1, \&\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vbo);}
\DoxyCodeLine{17   \mbox{\hyperlink{glad_8h_a1b33d322b89d94ad4938461db0a0424a}{glGenBuffers}}(1, \&\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>ebo);}
\DoxyCodeLine{18 }
\DoxyCodeLine{19   \mbox{\hyperlink{glad_8h_a4c13098a615d32e7f04aa4105149564f}{glBindVertexArray}}(\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vao);}
\DoxyCodeLine{20 }
\DoxyCodeLine{21   \mbox{\hyperlink{glad_8h_a3b3a3f8200f094b781e9f61e2f19fc50}{glBindBuffer}}(\mbox{\hyperlink{glad_8h_a7180045dcb52b22af2cd0366026bc3ed}{GL\_ARRAY\_BUFFER}}, \mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vbo);}
\DoxyCodeLine{22   \mbox{\hyperlink{glad_8h_a9419a03f5c46e2758f884e9c56d92b6a}{glBufferData}}(\mbox{\hyperlink{glad_8h_a7180045dcb52b22af2cd0366026bc3ed}{GL\_ARRAY\_BUFFER}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structvertex}{vertex}}) * \mbox{\hyperlink{renderer_8h_aa16efc18b3000ebdeae4569d87d9fae7}{RENDERER\_MAX\_VERTEX}}, \mbox{\hyperlink{include_2vally_2config_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, \mbox{\hyperlink{glad_8h_ac1915ebc9c952b9e7140f4bcc78319a6}{GL\_DYNAMIC\_DRAW}});}
\DoxyCodeLine{23 }
\DoxyCodeLine{24   \mbox{\hyperlink{glad_8h_a8afadc1fe36886688a02097cc63a17cb}{glVertexAttribPointer}}(0, 2, \mbox{\hyperlink{glad_8h_a6d19915d4237cb559505bd3e5dcfcf3c}{GL\_FLOAT}}, \mbox{\hyperlink{glad_8h_abca6d43f43fae31f49dcb883b2f301f6}{GL\_FALSE}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structvertex}{vertex}}), (\textcolor{keyword}{const} \textcolor{keywordtype}{void}*)offsetof(\mbox{\hyperlink{structvertex}{vertex}}, pos));}
\DoxyCodeLine{25   \mbox{\hyperlink{glad_8h_a6e8ee482001ee8fb9b3d4851116779b4}{glEnableVertexAttribArray}}(0);}
\DoxyCodeLine{26 }
\DoxyCodeLine{27   \mbox{\hyperlink{glad_8h_a8afadc1fe36886688a02097cc63a17cb}{glVertexAttribPointer}}(1, 4, \mbox{\hyperlink{glad_8h_a6d19915d4237cb559505bd3e5dcfcf3c}{GL\_FLOAT}}, \mbox{\hyperlink{glad_8h_abca6d43f43fae31f49dcb883b2f301f6}{GL\_FALSE}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structvertex}{vertex}}), (\textcolor{keyword}{const} \textcolor{keywordtype}{void}*)offsetof(\mbox{\hyperlink{structvertex}{vertex}}, \mbox{\hyperlink{glad_8h_a3ea846f998d64f079b86052b6c4193a8}{color}}));}
\DoxyCodeLine{28   \mbox{\hyperlink{glad_8h_a6e8ee482001ee8fb9b3d4851116779b4}{glEnableVertexAttribArray}}(1);}
\DoxyCodeLine{29 }
\DoxyCodeLine{30   \mbox{\hyperlink{glad_8h_a8afadc1fe36886688a02097cc63a17cb}{glVertexAttribPointer}}(2, 2, \mbox{\hyperlink{glad_8h_a6d19915d4237cb559505bd3e5dcfcf3c}{GL\_FLOAT}}, \mbox{\hyperlink{glad_8h_abca6d43f43fae31f49dcb883b2f301f6}{GL\_FALSE}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structvertex}{vertex}}), (\textcolor{keyword}{const} \textcolor{keywordtype}{void}*)offsetof(\mbox{\hyperlink{structvertex}{vertex}}, uv));}
\DoxyCodeLine{31   \mbox{\hyperlink{glad_8h_a6e8ee482001ee8fb9b3d4851116779b4}{glEnableVertexAttribArray}}(2);}
\DoxyCodeLine{32 }
\DoxyCodeLine{33   \mbox{\hyperlink{glad_8h_a8afadc1fe36886688a02097cc63a17cb}{glVertexAttribPointer}}(3, 1, \mbox{\hyperlink{glad_8h_a6d19915d4237cb559505bd3e5dcfcf3c}{GL\_FLOAT}}, \mbox{\hyperlink{glad_8h_abca6d43f43fae31f49dcb883b2f301f6}{GL\_FALSE}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structvertex}{vertex}}), (\textcolor{keyword}{const} \textcolor{keywordtype}{void}*)offsetof(\mbox{\hyperlink{structvertex}{vertex}}, tex\_id));}
\DoxyCodeLine{34   \mbox{\hyperlink{glad_8h_a6e8ee482001ee8fb9b3d4851116779b4}{glEnableVertexAttribArray}}(3);}
\DoxyCodeLine{35 }
\DoxyCodeLine{36   \mbox{\hyperlink{include_2vally_2config_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[\mbox{\hyperlink{renderer_8h_a01df4bd065557a795f6bccb267484ec3}{RENDERER\_MAX\_INDEX}}];}
\DoxyCodeLine{37   \mbox{\hyperlink{include_2vally_2config_8h_afaa62991928fb9fb18ff0db62a040aba}{u32}} \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}} = 0;}
\DoxyCodeLine{38   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{renderer_8h_a01df4bd065557a795f6bccb267484ec3}{RENDERER\_MAX\_INDEX}}; i += 6) \{}
\DoxyCodeLine{39     \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[i + 0] = 0 + \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}};}
\DoxyCodeLine{40     \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[i + 1] = 1 + \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}};}
\DoxyCodeLine{41     \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[i + 2] = 2 + \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}};}
\DoxyCodeLine{42 }
\DoxyCodeLine{43     \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[i + 3] = 2 + \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}};}
\DoxyCodeLine{44     \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[i + 4] = 3 + \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}};}
\DoxyCodeLine{45     \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}[i + 5] = 0 + \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}};}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \mbox{\hyperlink{glad_8h_ac915cd848f42b26af51745f204a3b9af}{offset}} += 4;}
\DoxyCodeLine{48   \}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50   \mbox{\hyperlink{glad_8h_a3b3a3f8200f094b781e9f61e2f19fc50}{glBindBuffer}}(\mbox{\hyperlink{glad_8h_ad26c63125c72cbf0347b589d51676e6a}{GL\_ELEMENT\_ARRAY\_BUFFER}}, \mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>ebo);}
\DoxyCodeLine{51   \mbox{\hyperlink{glad_8h_a9419a03f5c46e2758f884e9c56d92b6a}{glBufferData}}(\mbox{\hyperlink{glad_8h_ad26c63125c72cbf0347b589d51676e6a}{GL\_ELEMENT\_ARRAY\_BUFFER}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}), \mbox{\hyperlink{glad_8h_aedcdb207abe418517ae3def4e91c9d12}{indices}}, \mbox{\hyperlink{glad_8h_ab7dffdc215fbbe75b6ccacfecfc14648}{GL\_STATIC\_DRAW}});}
\DoxyCodeLine{52 }
\DoxyCodeLine{53   \mbox{\hyperlink{glad_8h_a3b3a3f8200f094b781e9f61e2f19fc50}{glBindBuffer}}(\mbox{\hyperlink{glad_8h_a7180045dcb52b22af2cd0366026bc3ed}{GL\_ARRAY\_BUFFER}}, 0);}
\DoxyCodeLine{54   \mbox{\hyperlink{glad_8h_a4c13098a615d32e7f04aa4105149564f}{glBindVertexArray}}(0);}
\DoxyCodeLine{55 }
\DoxyCodeLine{56   \mbox{\hyperlink{resources_8c_a16641af0e8abb4648df5964f32f30adb}{resources\_add}}(\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}, \mbox{\hyperlink{buffer_8c_a537219af5df0e5eda574b334834490c5}{buffer\_destroy}});}
\DoxyCodeLine{57 }
\DoxyCodeLine{58   \textcolor{keywordflow}{return} \mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}};}
\DoxyCodeLine{59 \}}

\end{DoxyCode}
\mbox{\Hypertarget{buffer_8c_a537219af5df0e5eda574b334834490c5}\label{buffer_8c_a537219af5df0e5eda574b334834490c5}} 
\index{buffer.c@{buffer.c}!buffer\_destroy@{buffer\_destroy}}
\index{buffer\_destroy@{buffer\_destroy}!buffer.c@{buffer.c}}
\doxysubsubsection{\texorpdfstring{buffer\_destroy()}{buffer\_destroy()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} buffer\+\_\+destroy (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structbuffer}{buffer}} $\ast$}]{buf }\end{DoxyParamCaption})}



Definition at line 61 of file buffer.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{61                                  \{}
\DoxyCodeLine{62   \mbox{\hyperlink{glad_8h_a214386aefdc30034088a21a6bccfbcbd}{glDeleteVertexArrays}}(1, \&\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vao);}
\DoxyCodeLine{63   \mbox{\hyperlink{glad_8h_a55652a3f087bb13267a5481b6ff1fe19}{glDeleteBuffers}}(1, \&\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vbo);}
\DoxyCodeLine{64   \mbox{\hyperlink{glad_8h_a55652a3f087bb13267a5481b6ff1fe19}{glDeleteBuffers}}(1, \&\mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>ebo);}
\DoxyCodeLine{65 \}}

\end{DoxyCode}
\mbox{\Hypertarget{buffer_8c_a1167efc273616c5dc7541d68a5488ed4}\label{buffer_8c_a1167efc273616c5dc7541d68a5488ed4}} 
\index{buffer.c@{buffer.c}!buffer\_set\_data@{buffer\_set\_data}}
\index{buffer\_set\_data@{buffer\_set\_data}!buffer.c@{buffer.c}}
\doxysubsubsection{\texorpdfstring{buffer\_set\_data()}{buffer\_set\_data()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} buffer\+\_\+set\+\_\+data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structbuffer}{buffer}} $\ast$}]{buf,  }\item[{\mbox{\hyperlink{include_2vally_2config_8h_a48d6cd8e4135fb2ff7e7f2dac84089ec}{i32}}}]{size,  }\item[{const \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} $\ast$}]{data }\end{DoxyParamCaption})}



Definition at line 74 of file buffer.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{74                                                               \{}
\DoxyCodeLine{75   \mbox{\hyperlink{glad_8h_a3b3a3f8200f094b781e9f61e2f19fc50}{glBindBuffer}}(\mbox{\hyperlink{glad_8h_a7180045dcb52b22af2cd0366026bc3ed}{GL\_ARRAY\_BUFFER}}, \mbox{\hyperlink{glad_8h_aa3b73d9ca9f2e2396cbeae1ce6ce14be}{buf}}-\/>vbo);}
\DoxyCodeLine{76   \mbox{\hyperlink{glad_8h_ab275ed802ac5db3e6b97973aab9d48e2}{glBufferSubData}}(\mbox{\hyperlink{glad_8h_a7180045dcb52b22af2cd0366026bc3ed}{GL\_ARRAY\_BUFFER}}, 0, \mbox{\hyperlink{glad_8h_a3d1e3edfcf61ca2d831883e1afbad89e}{size}}, \mbox{\hyperlink{glad_8h_a41a8247b39e9cdb744299c3331ca3453}{data}});}
\DoxyCodeLine{77 \}}

\end{DoxyCode}
\mbox{\Hypertarget{buffer_8c_a819e182a31edeb87b39af26beb49f24e}\label{buffer_8c_a819e182a31edeb87b39af26beb49f24e}} 
\index{buffer.c@{buffer.c}!buffer\_unbind@{buffer\_unbind}}
\index{buffer\_unbind@{buffer\_unbind}!buffer.c@{buffer.c}}
\doxysubsubsection{\texorpdfstring{buffer\_unbind()}{buffer\_unbind()}}
{\footnotesize\ttfamily \mbox{\hyperlink{glext_8h_a46df6112013cf583e82b25cebd5cb499}{void}} buffer\+\_\+unbind (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 71 of file buffer.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{71                      \{}
\DoxyCodeLine{72   \mbox{\hyperlink{glad_8h_a4c13098a615d32e7f04aa4105149564f}{glBindVertexArray}}(0);}
\DoxyCodeLine{73 \}}

\end{DoxyCode}
