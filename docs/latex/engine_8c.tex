\hypertarget{engine_8c}{}\doxysection{src/vally/core/engine.c File Reference}
\label{engine_8c}\index{src/vally/core/engine.c@{src/vally/core/engine.c}}
{\ttfamily \#include $<$vally/core/engine.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/assertions.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/logger.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/window.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/event.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/input.\+h$>$}\newline
{\ttfamily \#include $<$vally/core/time.\+h$>$}\newline
{\ttfamily \#include $<$vally/resources/resources.\+h$>$}\newline
{\ttfamily \#include $<$vally/renderer/renderer.\+h$>$}\newline
{\ttfamily \#include $<$vally/ecs/ecs.\+h$>$}\newline
\doxysubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structengine__state}{engine\+\_\+state}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{include_2vally_2config_8h_a4d99477750540df819f904cf665cbfb4}{b8}} \mbox{\hyperlink{engine_8c_ac1dbeec1d859459d5730ebcade62ef97}{engine\+\_\+create}} (\mbox{\hyperlink{include_2vally_2config_8h_ad309dbcaeea13aa602d686964156ea0b}{i16}} \mbox{\hyperlink{glad_8h_a77a72419a6bb6d8b56f8d9db93a120d0}{width}}, \mbox{\hyperlink{include_2vally_2config_8h_ad309dbcaeea13aa602d686964156ea0b}{i16}} \mbox{\hyperlink{glad_8h_a2e94a4956fa3fc42600a71518b6e6284}{height}}, const char $\ast$title)
\begin{DoxyCompactList}\small\item\em Initializes the vally engine. \end{DoxyCompactList}\item 
\mbox{\hyperlink{include_2vally_2config_8h_a4d99477750540df819f904cf665cbfb4}{b8}} \mbox{\hyperlink{engine_8c_ab5083309035e25d580da3da3748bb70e}{engine\+\_\+run}} (\mbox{\hyperlink{engine_8h_a08ecdce65eb5571457cdb141ec5aa149}{engine\+\_\+start}} \mbox{\hyperlink{glad_8h_ac55adc720a3098c1b454d2a4647f4361}{start}}, \mbox{\hyperlink{engine_8h_ae089957072efde72d93b362604bae8d4}{engine\+\_\+update}} \mbox{\hyperlink{game_8c_afdf66b907b003137cbc1d6955cfa0baf}{update}}, \mbox{\hyperlink{engine_8h_a7b3c70f336a7dd1de171c3a23ed65a08}{engine\+\_\+render}} \mbox{\hyperlink{game_8c_ab26eef233183a6a42dace6673fecbf95}{render}})
\begin{DoxyCompactList}\small\item\em Runs the vally engine. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{engine_8c_ac1dbeec1d859459d5730ebcade62ef97}\label{engine_8c_ac1dbeec1d859459d5730ebcade62ef97}} 
\index{engine.c@{engine.c}!engine\_create@{engine\_create}}
\index{engine\_create@{engine\_create}!engine.c@{engine.c}}
\doxysubsubsection{\texorpdfstring{engine\_create()}{engine\_create()}}
{\footnotesize\ttfamily \mbox{\hyperlink{include_2vally_2config_8h_a4d99477750540df819f904cf665cbfb4}{b8}} engine\+\_\+create (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{include_2vally_2config_8h_ad309dbcaeea13aa602d686964156ea0b}{i16}}}]{width,  }\item[{\mbox{\hyperlink{include_2vally_2config_8h_ad309dbcaeea13aa602d686964156ea0b}{i16}}}]{height,  }\item[{const char $\ast$}]{title }\end{DoxyParamCaption})}



Initializes the vally engine. 

This function initializes the vally engine. Must be called before any other vally function calls.


\begin{DoxyParams}{Parameters}
{\em width} & Target window width \\
\hline
{\em height} & Target window height \\
\hline
{\em title} & Target window title\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE -\/ if success, F\+A\+L\+SE -\/ in case of fatal errors 
\end{DoxyReturn}


Definition at line 58 of file engine.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{58                                                            \{}
\DoxyCodeLine{59   \textcolor{keywordflow}{if} (initialized) \{}
\DoxyCodeLine{60     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"engine\_create cannot be called more than once"});}
\DoxyCodeLine{61     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{62   \}}
\DoxyCodeLine{63 }
\DoxyCodeLine{64   state.\mbox{\hyperlink{structengine__state_a35f38473e4e944a16d7e830f74b1d1b1}{is\_runing}} = \mbox{\hyperlink{include_2vally_2config_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{65   state.\mbox{\hyperlink{structengine__state_a7b1ea0b42d5a04b5fb07e6a8a1cbe83a}{is\_suspended}} = \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{66 }
\DoxyCodeLine{67   \textcolor{comment}{//=======Initialze subsystems===========}}
\DoxyCodeLine{68   \mbox{\hyperlink{logger_8c_af983bb4c29c37e2ef965bef699dde16d}{logger\_init}}();}
\DoxyCodeLine{69 }
\DoxyCodeLine{70   \mbox{\hyperlink{logger_8h_a787875cab0f42571d60be03d1762c00a}{VALLY\_INFO}}(\textcolor{stringliteral}{"VALLY starts"});}
\DoxyCodeLine{71 }
\DoxyCodeLine{72   state.\mbox{\hyperlink{structengine__state_ac7ea088daa6ed7e9cac891fba8bfd0c2}{width}} = \mbox{\hyperlink{glad_8h_a77a72419a6bb6d8b56f8d9db93a120d0}{width}};}
\DoxyCodeLine{73   state.\mbox{\hyperlink{structengine__state_a8decb36466adee4bf95034ac45bf3451}{height}} = \mbox{\hyperlink{glad_8h_a2e94a4956fa3fc42600a71518b6e6284}{height}};}
\DoxyCodeLine{74   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{src_2vally_2core_2window_8c_aa9e11f3c895eb9257a996d77d280c520}{window\_create}}(\mbox{\hyperlink{glad_8h_a77a72419a6bb6d8b56f8d9db93a120d0}{width}}, \mbox{\hyperlink{glad_8h_a2e94a4956fa3fc42600a71518b6e6284}{height}}, title)) \{}
\DoxyCodeLine{75     \mbox{\hyperlink{logger_8h_ab2601211ce77503ba5fac7c144dbfa89}{VALLY\_FATAL}}(\textcolor{stringliteral}{"Could not initialize the window system!"});}
\DoxyCodeLine{76     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{77   \}}
\DoxyCodeLine{78 }
\DoxyCodeLine{79   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{event_8h_a5b0f78273328aee6d4f9ce3949a6b727}{event\_init}}()) \{}
\DoxyCodeLine{80     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"Could not initialize the event system!"});}
\DoxyCodeLine{81     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{82   \}}
\DoxyCodeLine{83 }
\DoxyCodeLine{84   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{input_8h_a593bcbbd513523292f792c80ee8f9e43}{input\_init}}()) \{}
\DoxyCodeLine{85     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"Could not initialize the input system!"});}
\DoxyCodeLine{86     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{87   \}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{resources_8c_a2bdcbd579f013459bcc7f55b7457613b}{resources\_init}}()) \{}
\DoxyCodeLine{90     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"Could not initialize the resource system!"});}
\DoxyCodeLine{91     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{92   \}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{renderer_8c_a4ae2b9fe0b10687f04b90a3d8b2556bd}{renderer\_init}}()) \{}
\DoxyCodeLine{95     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"Could not initialize the renderer system!"});}
\DoxyCodeLine{96     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{97   \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{ecs_8h_ab40fd1fa64a61a9cc15240e9a5864316}{ecs\_init}}()) \{}
\DoxyCodeLine{100     \mbox{\hyperlink{logger_8h_ae5066a2e77390ed60a2e2a98c374c520}{VALLY\_ERROR}}(\textcolor{stringliteral}{"Could not initialize ECS!"});}
\DoxyCodeLine{101     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{102   \}}
\DoxyCodeLine{103   \textcolor{comment}{//=====================================}}
\DoxyCodeLine{104 }
\DoxyCodeLine{105 }
\DoxyCodeLine{106   state.\mbox{\hyperlink{structengine__state_a709037bcaa8d22ce5422328794f1aa65}{last\_time}} = \mbox{\hyperlink{time_8c_a40c527fa3a4dfe786ce3f977c78e653a}{time\_now}}();}
\DoxyCodeLine{107 }
\DoxyCodeLine{108   initialized = \mbox{\hyperlink{include_2vally_2config_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{109 }
\DoxyCodeLine{110   \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{111 \}}

\end{DoxyCode}
\mbox{\Hypertarget{engine_8c_ab5083309035e25d580da3da3748bb70e}\label{engine_8c_ab5083309035e25d580da3da3748bb70e}} 
\index{engine.c@{engine.c}!engine\_run@{engine\_run}}
\index{engine\_run@{engine\_run}!engine.c@{engine.c}}
\doxysubsubsection{\texorpdfstring{engine\_run()}{engine\_run()}}
{\footnotesize\ttfamily \mbox{\hyperlink{include_2vally_2config_8h_a4d99477750540df819f904cf665cbfb4}{b8}} engine\+\_\+run (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{engine_8h_a08ecdce65eb5571457cdb141ec5aa149}{engine\+\_\+start}}}]{start,  }\item[{\mbox{\hyperlink{engine_8h_ae089957072efde72d93b362604bae8d4}{engine\+\_\+update}}}]{update,  }\item[{\mbox{\hyperlink{engine_8h_a7b3c70f336a7dd1de171c3a23ed65a08}{engine\+\_\+render}}}]{render }\end{DoxyParamCaption})}



Runs the vally engine. 

This function runs the vally engine.


\begin{DoxyParams}{Parameters}
{\em start} & Function that will be called before main loop \\
\hline
{\em update} & Function that will be called before rendering \\
\hline
{\em render} & Function that will be called in rendering\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE -\/ if success, F\+A\+L\+SE -\/ in case of fatal errors 
\end{DoxyReturn}


Definition at line 113 of file engine.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{113                                                                               \{}
\DoxyCodeLine{114   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{glad_8h_ac55adc720a3098c1b454d2a4647f4361}{start}} || !\mbox{\hyperlink{game_8c_afdf66b907b003137cbc1d6955cfa0baf}{update}} || !\mbox{\hyperlink{game_8c_ab26eef233183a6a42dace6673fecbf95}{render}}) \{}
\DoxyCodeLine{115     \mbox{\hyperlink{logger_8h_ab2601211ce77503ba5fac7c144dbfa89}{VALLY\_FATAL}}(\textcolor{stringliteral}{"Could not run the engine! Functions must not be NULL!"});}
\DoxyCodeLine{116     \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{117   \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119   \mbox{\hyperlink{glad_8h_ac55adc720a3098c1b454d2a4647f4361}{start}}();}
\DoxyCodeLine{120 }
\DoxyCodeLine{121   \textcolor{keywordflow}{while} (state.\mbox{\hyperlink{structengine__state_a35f38473e4e944a16d7e830f74b1d1b1}{is\_runing}}) \{}
\DoxyCodeLine{122     \mbox{\hyperlink{include_2vally_2config_8h_a94dab5770726ccbef8c7d026cfbdf8e5}{f64}} current\_time = \mbox{\hyperlink{time_8c_a40c527fa3a4dfe786ce3f977c78e653a}{time\_now}}();}
\DoxyCodeLine{123     \mbox{\hyperlink{include_2vally_2config_8h_a94dab5770726ccbef8c7d026cfbdf8e5}{f64}} delta\_time = current\_time -\/ state.\mbox{\hyperlink{structengine__state_a709037bcaa8d22ce5422328794f1aa65}{last\_time}};}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{src_2vally_2core_2window_8c_a8eef3112ffc6da9114150e5debc62ea7}{window\_poll\_events}}()) \{}
\DoxyCodeLine{126       state.\mbox{\hyperlink{structengine__state_a35f38473e4e944a16d7e830f74b1d1b1}{is\_runing}} = \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{127     \}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129     \mbox{\hyperlink{game_8c_afdf66b907b003137cbc1d6955cfa0baf}{update}}(delta\_time);}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \mbox{\hyperlink{animator_8h_a15f32963c1ac3b6fe5afbc4cdc14b996}{ecs\_animator\_update}}(delta\_time);}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \mbox{\hyperlink{renderer_8c_a96a061c5050e42b8d179249b2e8a8d3d}{renderer\_clear\_screen}}();}
\DoxyCodeLine{134     \mbox{\hyperlink{renderer_8c_aa3cb3b8ee10c8cee851289641a7efe1b}{renderer\_begin\_batch}}();}
\DoxyCodeLine{135     \mbox{\hyperlink{spriterenderer_8h_ab4ff416b9b83f7e3988b60652cc479b4}{ecs\_spriterenderer\_update}}();}
\DoxyCodeLine{136     \mbox{\hyperlink{game_8c_ab26eef233183a6a42dace6673fecbf95}{render}}(delta\_time);}
\DoxyCodeLine{137     \mbox{\hyperlink{renderer_8c_a90ce426230127f65390165eb21e98d67}{renderer\_end\_batch}}();}
\DoxyCodeLine{138     \mbox{\hyperlink{renderer_8c_a209ddec86b275bb211896bcf1e7cfafa}{renderer\_flush}}();}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     \mbox{\hyperlink{src_2vally_2core_2window_8c_a7a456564f5873a0c7d7809278ffc7fed}{window\_swap\_buffers}}();}
\DoxyCodeLine{141 }
\DoxyCodeLine{142     state.\mbox{\hyperlink{structengine__state_a709037bcaa8d22ce5422328794f1aa65}{last\_time}} = current\_time;}
\DoxyCodeLine{143   \}}
\DoxyCodeLine{144 }
\DoxyCodeLine{145   state.\mbox{\hyperlink{structengine__state_a35f38473e4e944a16d7e830f74b1d1b1}{is\_runing}} = \mbox{\hyperlink{include_2vally_2config_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{146 }
\DoxyCodeLine{147   \textcolor{comment}{// Termiante all systems}}
\DoxyCodeLine{148   \mbox{\hyperlink{event_8h_af5c0fd0bca4f543c61042cf947de7ef9}{event\_terminate}}();}
\DoxyCodeLine{149   \mbox{\hyperlink{input_8h_a95fa09da1f1bf6a0fdd462b0d4ae2d8b}{input\_terminate}}();}
\DoxyCodeLine{150   \mbox{\hyperlink{renderer_8c_aa1882befd9106950e8c2913cc66b093a}{renderer\_terminate}}();}
\DoxyCodeLine{151   \mbox{\hyperlink{resources_8c_a6105d50e032c659b7403561b1f108195}{resources\_terminate}}();}
\DoxyCodeLine{152   \mbox{\hyperlink{src_2vally_2core_2window_8c_a01212a4a8353016a1350ee152faeebd3}{window\_terminate}}();}
\DoxyCodeLine{153   \mbox{\hyperlink{logger_8h_a787875cab0f42571d60be03d1762c00a}{VALLY\_INFO}}(\textcolor{stringliteral}{"Shutting down"});}
\DoxyCodeLine{154 }
\DoxyCodeLine{155   \textcolor{keywordflow}{return} \mbox{\hyperlink{include_2vally_2config_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{156 \}}

\end{DoxyCode}
